<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>RELRO</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>
<body>
<div class='page'><strong><h1># Exploit Protections - RELRO</h1></strong><br />• <a href="https://www.redhat.com/en/blog/hardening-elf-binaries-using-relocation-read-only-relro">https://www.redhat.com/en/blog/hardening-elf-binaries-using-relocation-read-only-relro</a><br />• <a href="https://ctf101.org/binary-exploitation/relocation-read-only/">https://ctf101.org/binary-exploitation/relocation-read-only/</a><br /><br /><code>RELRO</code> stands for RELocation Read-Only.<br /><br /><code>RELRO</code> prevents the <em>Global Offset Table</em> (GOT) from being overwritten.<br />It does this by forcing the linker, each time a dynamically resolved function is run, to set the the <em>Global Offset Table</em> to be read-only AFTER it&#39;s resolved that function&#39;s location/address in the shared library. <br /><br />This prevents the <em>Global Offset Table</em> from being overwritten.<br /><br /><strong>Partial RELRO</strong><br />Partial RELRO is the default setting in gcc. <br />Almost all binaries you&#39;ll come across will have Partial RELRO.<br />BUT, from an attackers point-of-view, partial RELRO makes almost no difference to your attack.<br /><br />Partial RELRO forces the <em>Global Offset Table</em> to come before the .bss section in memory (where unitialised data is stored), eliminating the risk of a buffer overflows where a global variable overwrites a GOT entry.<br /><br /><strong>Full RELRO</strong><br />Full RELRO is what&#39;s described above - the <em>Global Offset</em> <em>Table</em> is set to read-only.<br /><br />Full RELRO is not a default compiler setting because it can greatly increase program startup time since all symbols have to be resolved before the program is started. In large programs with thousands of symbols that need to be linked, this can cause a noticable delay in startup time.<br /><br /><strong><h3>### gcc switches</h3></strong><br />• <code>-z,relro</code> - compile with Partial RELRO (the default setting in gcc. Almost all binaries you see will have Partial RELRO)<br />• <code>-z,relro,-z,now</code> - compile with full RELRO</div>
</body>
</html>
