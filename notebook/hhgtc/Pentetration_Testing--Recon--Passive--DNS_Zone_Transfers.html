<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>DNS Zone Transfers</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>
<body>
<div class='page'><strong><h1># DNS Zone Transfers</h1></strong><br />This is a pretty active form of reconnaissance: you&#39;re directly engaging with the target and they&#39;ll probably know about it. Be a little careful.<br /><br />The DNS zone file contains a list of all the DNS names configured for that zone.<br />Admins often misconfigure their DNS servers. If their DNS server is misconfigured, you can request a DNS zone transfer. This will give you all the DNS names for that zone, and more or less a map of their internal network.<br /><br /><strong><h2>## Available tools</h2></strong><br />• <code>DNSRecon</code><br />• <code>DNSenum</code><br /><br />Both achieve what&#39;s written below<br /><br /><strong><h2>## Perform a DNS zone transfer</h2></strong><br /><code>-l</code> is <code>list mode</code><br />This makes the host perform a zone transfer<br /><br /><strong><h3>### host</h3></strong><br /><code>host -l &lt;domain name&gt; &lt;dns server address&gt;</code><br />e.g. <code>host -l megacorpone.com ns1.megacorpone.com</code><br />e.g. <code>host -l friendzone.red 10.10.10.123</code><br /><br /><strong><h3>### dig</h3></strong><br /><code>dig AXFR friendzone.red @10.10.10.123 -p &lt;port&gt;</code><br />You don&#39;t have to specify a port if the DNS server is running on the default port 53<br /><code>@</code> specifies a DNS server<br /><br /><strong><h3>### bash script for Zone Transfer</h3></strong><br /><div class="codebox"><div class="codebox">#/bin/bash&nbsp;<br />#&nbsp;Simple&nbsp;Zone&nbsp;Transfer&nbsp;Bash&nbsp;Script&nbsp;<br />#&nbsp;$1&nbsp;is&nbsp;the&nbsp;first&nbsp;argument&nbsp;given&nbsp;after&nbsp;the&nbsp;bash&nbsp;script<br />#&nbsp;Check&nbsp;if&nbsp;argument&nbsp;was&nbsp;given,&nbsp;if&nbsp;not,&nbsp;print&nbsp;usage&nbsp;<br />if&nbsp;[&nbsp;-z&nbsp;&quot;$1&quot;&nbsp;];&nbsp;then&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;&quot;[*]&nbsp;Simple&nbsp;Zone&nbsp;transfer&nbsp;script&quot;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;&quot;[*]&nbsp;Usage&nbsp;:&nbsp;$0&nbsp;&lt;domain&nbsp;name&gt;&nbsp;&quot;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;&quot;[*]&nbsp;Example&nbsp;:&nbsp;$0&nbsp;aeoi.org.ir&nbsp;&quot;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit&nbsp;0<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi<br /><br />#&nbsp;if&nbsp;argument&nbsp;was&nbsp;given,&nbsp;identify&nbsp;the&nbsp;DNS&nbsp;servers&nbsp;for&nbsp;the&nbsp;domain&nbsp;<br />echo&nbsp;$1<br />#&nbsp;For&nbsp;each&nbsp;of&nbsp;these&nbsp;servers,&nbsp;attempt&nbsp;a&nbsp;zone&nbsp;transfer&nbsp;<br />for&nbsp;server&nbsp;in&nbsp;$(host&nbsp;-t&nbsp;ns&nbsp;$1&nbsp;|cut&nbsp;-d&quot;&nbsp;&quot;&nbsp;-f4);do&nbsp;<br />host&nbsp;-l&nbsp;$1&nbsp;$server&nbsp;|grep&nbsp;&quot;has&nbsp;address&quot;&nbsp;<br />done</div></div><br />	</div>
</body>
</html>
