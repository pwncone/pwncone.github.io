<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>External</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>
<body>
<div class='page'><strong><h1># External Cheats</h1></strong><br />External cheats run outside of the game&#39;s process,<br />and read &amp; write memory to the game using a handle.<br />Grahpics are (commonly) drawn by creating a transparent overlay that sits over the top of the game.<br /><br />Performance is slow (because you&#39;re using function calls to read values).<br /><br /><strong><h2>## General Program Flow</h2></strong><br />1. Open a handle to the game - <code>OpenProcess</code><br />2. Grab the game&#39;s window size and position - <code>FindWindowA</code> and <code>GetWindowRect</code><br />3. Create a transparent window over the top - <code>CreateWindowExA</code><br />4. Initialise your graphics API (DirectX, GDI, OpenGL, etc.)<br />5. Start infinite loop<br />   1) ReadProcessMemory from game (player coordinates)<br />   2) Do cheats (draw ESP, aimbot, write to game&#39;s memory, etc.)<br />	<br /><strong><h3>### Design Considerations</h3></strong><br /><h4>#### Use a Separate Thread to Update Entities</h4><br />Your infinite loop might will look something like this:<br /><div class="codebox"><div class="codebox">void&nbsp;DoCheats()<br />{<br />	//&nbsp;Loop&nbsp;through&nbsp;players<br />	for&nbsp;(int&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;total_players;&nbsp;i++)<br />	{<br />		//&nbsp;ReadProcessMemory&nbsp;in&nbsp;target&nbsp;game&nbsp;to&nbsp;grab&nbsp;the&nbsp;entity<br />		entity_t*&nbsp;entity&nbsp;=&nbsp;GrabEntity(i);<br />		<br />		//&nbsp;If&nbsp;entity&nbsp;on&nbsp;screen<br />		if&nbsp;(WorldToScreen(entity)&nbsp;==&nbsp;true)<br />		{<br />			//&nbsp;Draw&nbsp;snapline&nbsp;from&nbsp;bottom&nbsp;middle&nbsp;of&nbsp;screen&nbsp;to&nbsp;entity&#39;s&nbsp;feet<br />			DrawLine(screen_botmid,&nbsp;entity_feet,&nbsp;red);<br />		}<br />	}<br />}<br /><br />int&nbsp;main()<br /><span style="color:#000000;font-weight:400">{</span><br />	while&nbsp;(TRUE)<br />	{<br />		//&nbsp;Prep&nbsp;graphics&nbsp;API&nbsp;for&nbsp;drawing<br />		IDirect3DDevice9_Clear();<br />		IDirect3DDevice9_BeginScene();<br />		<br />		DoCheats();<br />		<br />		//&nbsp;Draw<br />		IDirect3DDevice9_EndScene();<br />		IDirect3DDevice9_Present();<br />		<br />		Sleep(1);<br />	}<br /><span style="color:#000000;font-weight:400">}</span></div></div><br /><br />The problem with this is that your rendering loop (in the <code>while TRUE</code>)<br />has to wait for the DoCheats() function to ReadProcessMemory in the target game before it can start drawing.<br />ReadProcessMemory is slow, and having to wait for it can delay your drawing process.<br />In taxing games/processes/low spec PCs, this can potentially cause your drawing to be choppy.<br />(not that I&#39;ve experienced, but apprently it can).<br /><br />Instead, you can create a thread to update your entities and then draw afterwards.<br />For example:<br /><div class="codebox"><div class="codebox">//&nbsp;TOTALLY&nbsp;BOGUS.&nbsp;HAVEN&#39;T&nbsp;FIGURED&nbsp;THIS&nbsp;OUT&nbsp;YET.<br />Entity_t&nbsp;entities&nbsp;=&nbsp;{&nbsp;0&nbsp;};<br /><br />void&nbsp;UpdateEntities()<br />{<br />	ReadProcessMemory<br />}<br /><br />void&nbsp;DoCheats()<br />{<br />	//&nbsp;Loop&nbsp;through&nbsp;players<br />	for&nbsp;(int&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;total_players;&nbsp;i++)<br />	{<br />		//&nbsp;ReadProcessMemory&nbsp;in&nbsp;target&nbsp;game&nbsp;to&nbsp;grab&nbsp;the&nbsp;entity<br />		entity_t*&nbsp;entity&nbsp;=&nbsp;GrabEntity(i);<br />		<br />		//&nbsp;If&nbsp;entity&nbsp;on&nbsp;screen<br />		if&nbsp;(WorldToScreen(entity)&nbsp;==&nbsp;true)<br />		{<br />			//&nbsp;Draw&nbsp;snapline&nbsp;from&nbsp;bottom&nbsp;middle&nbsp;of&nbsp;screen&nbsp;to&nbsp;entity&#39;s&nbsp;feet<br />			DrawLine(screen_botmid,&nbsp;entity_feet,&nbsp;red);<br />		}<br />	}<br />}<br /><br />int&nbsp;main()<br /><span style="color:#000000;font-weight:400">{</span><br />	CreateThread(UpdateEntities());<br /><br />	while&nbsp;(TRUE)<br />	{<br />		//&nbsp;Prep&nbsp;graphics&nbsp;API&nbsp;for&nbsp;drawing<br />		IDirect3DDevice9_Clear();<br />		IDirect3DDevice9_BeginScene();<br />		<br />		DoCheats();<br />		<br />		//&nbsp;Draw<br />		IDirect3DDevice9_EndScene();<br />		IDirect3DDevice9_Present();<br />		<br />		Sleep(1);<br />	}<br /><span style="color:#000000;font-weight:400">}</span></div></div><br /><br />This can be seen here in this example:<br />â€¢ <a href="https://github.com/forceinline/csgo-external-esp/blob/21d0d0db0e10275114872a962b9b538f5248f9e3/main.cpp#L45">https://github.com/forceinline/csgo-external-esp/blob/21d0d0db0e10275114872a962b9b538f5248f9e3/main.cpp#L45</a><br /><br /><br /><br /><br /></div>
</body>
</html>
