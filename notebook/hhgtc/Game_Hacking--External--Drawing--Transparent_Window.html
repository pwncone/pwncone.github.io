<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Transparent Window</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>
<body>
<div class='page'><strong><h1># Create a Transparent Window</h1></strong><br />When external, you need to create a transparent overlay window to draw your cheat on.<br /><br />A downside to using a transparent window to draw your cheat is that<br />you&#39;re forced to play in borderless fullscreen or windowed mode.<br />By playing in exclusive fullscreen the transparent window won&#39;t be overlayed over the top.<br /><br />For source examples of creating a transparent window,<br />you can refer to any externll or kernel cheat source. All the ones which draw will most likely create a window.<br /><br /><strong>Source</strong><br />• <a href="https://github.com/Dexooma/External-Overlay-with-no-mosttop">https://github.com/Dexooma/External-Overlay-with-no-mosttop</a> - An overlay<br />• <a href="https://github.com/btbd/e3d">https://github.com/btbd/e3d</a> - A custom 3d engine<br /><br />NOTE:<br />• <code>DwmExtendFrameIntoClientArea</code> might cause input lag. Not sure.<br /><br /><h2>## Essentials</h2><br />The essentials for creating a transparent window are...<br /><br /><div class="codebox"><div class="codebox">//&nbsp;TOTAL&nbsp;BULLSHIT&nbsp;NOT&nbsp;FINISHED&nbsp;YET<br />LRESULT&nbsp;CALLBACK&nbsp;WindowProc(HWND&nbsp;hWnd,&nbsp;UINT&nbsp;msg,&nbsp;WPARAM&nbsp;wParam,&nbsp;LPARAM&nbsp;lParam)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(msg)<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;WM_CLOSE:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DestroyWindow(hWnd);	//&nbsp;Destroys&nbsp;window&nbsp;and&nbsp;LL&nbsp;child&nbsp;windows&nbsp;and&nbsp;removes&nbsp;window&nbsp;from&nbsp;system<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br />&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;WM_DESTROY:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PostQuitMessage(0);		//&nbsp;Sends&nbsp;WM_QUIT&nbsp;to&nbsp;message&nbsp;loop&nbsp;to&nbsp;quit<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br />&nbsp;&nbsp;&nbsp;&nbsp;default:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;DefWindowProcA(hWnd,&nbsp;msg,&nbsp;wParam,&nbsp;lParam);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0;<br />}<br /><br />wc.style&nbsp;=&nbsp;CS_HREDRAW&nbsp;|&nbsp;CS_VREDRAW;<br />wc.hbrBackground&nbsp;=&nbsp;(HBRUSH)COLOR_WINDOW;<br />wc.lpfnWndProc&nbsp;=&nbsp;WindowProc;<br /><br />DWORD&nbsp;dwStyle_flags&nbsp;=&nbsp;WS_POPUP;<br />DWORD&nbsp;dwStyleEx_flags&nbsp;=&nbsp;WS_EX_LAYERED&nbsp;|&nbsp;WS_EX_TRANSPARENT;</div></div><br /><br /><strong><h2>## Notes</h2></strong><br /><h3>### Get game window size excluding border pixels and title bar</h3><br /><h4>#### GetWindowRect</h4><br />GetWindowRect will return the coordinates of the window including its title and border pixels.<br />Top left of the screen is 0,0.<br />To find the width of the game, you can do <code>game_pos.right - game_pos.left</code><br />To find the height of the game, you can do <code>game_pos.top - game_pos.bottom</code><br /><br /><div class="codebox"><div class="codebox">//&nbsp;This&nbsp;will&nbsp;return&nbsp;1030&nbsp;x&nbsp;797&nbsp;as&nbsp;the&nbsp;window&nbsp;size<br />HWND&nbsp;game_window&nbsp;=&nbsp;FindWindowA(NULL,&nbsp;&quot;Call&nbsp;of&nbsp;Duty&nbsp;4&quot;);<br />RECT&nbsp;game_pos&nbsp;=&nbsp;{&nbsp;0&nbsp;};<br />GetWindowRect(game_window,&nbsp;&amp;game_pos);<br />int&nbsp;GAME_WIDTH&nbsp;=&nbsp;game_pos.right&nbsp;-&nbsp;game_pos.left;<br />int&nbsp;GAME_HEIGHT&nbsp;=&nbsp;game_pos.bottom&nbsp;-&nbsp;game_pos.top;</div></div><br /><br />However, this will include the top window title and the border pixels e.g. this bit:<br /><a href=""><img src="images/1277-1.png" alt="images/1277-1.png" /></a><br /><br />The border pixels are 3 px, and the top bar is 26.<br />For example, if the game is running at 1024 x 768, it will return the size 1030 * 797.<br />This will make all of your drawing wrong.<br /><br />To accomodate for this, you can adjust the position and size to exlude the top bar and pixels.<br /><div class="codebox"><div class="codebox">bool&nbsp;windowed_mode&nbsp;=&nbsp;true;<br /><br />//&nbsp;This&nbsp;will&nbsp;return&nbsp;1024&nbsp;x&nbsp;768&nbsp;as&nbsp;the&nbsp;window&nbsp;size<br />HWND&nbsp;game_window&nbsp;=&nbsp;FindWindowA(NULL,&nbsp;&quot;Call&nbsp;of&nbsp;Duty&nbsp;4&quot;);<br />RECT&nbsp;game_pos&nbsp;=&nbsp;{&nbsp;0&nbsp;};<br />GetWindowRect(game_window,&nbsp;&amp;game_pos);<br />if&nbsp;(windowed_mode&nbsp;==&nbsp;true)<br />	{<br />		printf(&quot;[*]&nbsp;windowed&nbsp;mode&nbsp;=&nbsp;true&nbsp;\n&quot;);<br />		game_pos.left&nbsp;+=&nbsp;3;<br />		game_pos.right&nbsp;-=&nbsp;3;<br />		game_pos.top&nbsp;+=&nbsp;26;<br />		game_pos.bottom&nbsp;-=&nbsp;3;<br />	}<br />int&nbsp;GAME_WIDTH&nbsp;=&nbsp;game_pos.right&nbsp;-&nbsp;game_pos.left;<br />int&nbsp;GAME_HEIGHT&nbsp;=&nbsp;game_pos.bottom&nbsp;-&nbsp;game_pos.top;</div></div><br /><br />If you&#39;re running in borderless fullscreen, you don&#39;t need to do any of this (because there&#39;s no border)<br /><br /><h4>#### GetClientRect</h4><br />GetClientRect will grab the the size of the &quot;client area&quot; of the game window<br />i.e. the size of the window without the border.<br />This will grab the correct resolution e.g. 1024 x 768.<br /><br />However, client coordiantes start from the upper left corner of the client window<br />e.g. top left is 0,0. <br />Therefore, this won&#39;t get the location of the game on the monitor.<br /><br />To grab the X and Y coordinates of the game window on the screen, you can use ClientToScreen.<br /><br /><div class="codebox"><div class="codebox">//&nbsp;Get&nbsp;game&nbsp;resolution&nbsp;size&nbsp;(using&nbsp;Client&nbsp;excludes&nbsp;border&nbsp;pixels&nbsp;and&nbsp;bar)<br />RECT&nbsp;game_size&nbsp;=&nbsp;{&nbsp;0&nbsp;};<br />GetClientRect(game_window,&nbsp;&amp;game_size);<br />int&nbsp;GAME_WIDTH&nbsp;=&nbsp;game_size.right&nbsp;-&nbsp;game_size.left;<br />int&nbsp;GAME_HEIGHT&nbsp;=&nbsp;game_size.bottom&nbsp;-&nbsp;game_size.top;<br /><br />//&nbsp;Get&nbsp;position&nbsp;of&nbsp;game&nbsp;window&nbsp;on&nbsp;screen<br />POINT&nbsp;game_pos&nbsp;=&nbsp;{&nbsp;0&nbsp;};<br />ClientToScreen(game_window,&nbsp;&amp;game_pos);</div></div><br /><br />This solution is arguably better because it&#39;ll work for when running in both<br />windowed mode and borderless fullscreen.<br /></div>
</body>
</html>
