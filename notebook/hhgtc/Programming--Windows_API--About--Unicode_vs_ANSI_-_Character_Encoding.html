<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Unicode vs ANSI / Character Encoding</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>
<body>
<div class='page'><strong><h1># Windows API - Unicode vs ANSI</h1></strong><br />• <em>Windows via C/C++ 5th Edition</em><br />• <a href="https://www.codeproject.com/Articles/76252/What-are-TCHAR-WCHAR-LPSTR-LPWSTR-LPCTSTR-etc">https://www.codeproject.com/Articles/76252/What-are-TCHAR-WCHAR-LPSTR-LPWSTR-LPCTSTR-etc</a><br /><br /><strong>Always use Unicode</strong><br />• Avoiding conversion between ANSI and Unicode = better performance<br />• Your code supports multiple languages<br />• Your code supports interaction with COM objects and .NET framework<br /><br /><code>char</code>       = 8-bit ANSI character                        <em>C standard library</em><br /><code>wchar_t</code> = 16-bit UTF-16 Unicode charcter      <em>Windows Data type</em><br />   ◇ <div class="codebox"><div class="codebox">//&nbsp;An&nbsp;uppercase&nbsp;L&nbsp;before&nbsp;a&nbsp;literal&nbsp;string&nbsp;informs&nbsp;the&nbsp;compiler&nbsp;that&nbsp;the&nbsp;string&nbsp;should&nbsp;be&nbsp;compiled&nbsp;as&nbsp;a&nbsp;Unicode&nbsp;string.<br />wchar_t&nbsp;szBuffer[100]&nbsp;=&nbsp;L&quot;A&nbsp;String&quot;;</div></div><br /><br /><strong><h3>TCHAR - Generic Character Encoding</h3></strong><br />Windows uses UTF-16LE by default.<br />If you want your code to be independent of character encoding -&gt; use generic data types.<br /><br />Instead of <code>char</code> or <code>wchar_t</code>, use:<br /><code>TCHAR</code><br />The <code>TEXT(&quot;&quot;)</code> or <code>_T</code> macro will expand the string to ANSI or Unicode.<br /><br /><div class="codebox"><div class="codebox">//&nbsp;If&nbsp;UNICODE&nbsp;defined,&nbsp;a&nbsp;16-bit&nbsp;character;&nbsp;else&nbsp;an&nbsp;8-bit&nbsp;character<br />TCHAR&nbsp;c&nbsp;=&nbsp;TEXT(&#39;A&#39;);<br /><br />//&nbsp;If&nbsp;UNICODE&nbsp;defined,&nbsp;an&nbsp;array&nbsp;of&nbsp;16-bit&nbsp;characters;&nbsp;else&nbsp;8-bit&nbsp;characters<br />TCHAR&nbsp;szBuffer[100]&nbsp;=&nbsp;TEXT(&quot;A&nbsp;String&quot;);</div></div><br /><br />This setting in Visual Studio defines what charcter set is used for compilation:<br /><a href=""><img src="images/1501-1.png" alt="images/1501-1.png" /></a><br /><br /><strong><h3>TCHAR - Generic Character Functions</h3></strong><br /><code>strlen</code> - returns length of an ANSI string.<br /><code>wcslen</code> - returns length of a Unicode string<br /><br /><code>_tcslen</code> uses either Unicode or ANSI based on the character set you chose.<br />The TChar.h macro looks like this:<br /><div class="codebox"><div class="codebox">#ifdef&nbsp;_UNICODE<br />#define&nbsp;_tcslen&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wcslen<br />#else<br />#define&nbsp;_tcslen&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strlen<br />#endif</div></div><br /><br /><strong>Alternatives examples:</strong><br /><code>printf</code> -&gt; <code>tprintf</code><br /><br /><br /><br /><br /><br /></div>
</body>
</html>
