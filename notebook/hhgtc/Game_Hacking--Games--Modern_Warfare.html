<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Modern Warfare</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>
<body>
<div class='page'><strong><h1># Modern Warfare</h1></strong><br />Engine: DirectX12<br /><br /><strong>Internal Source</strong><br />• <a href="https://github.com/NMan1/Modern-Warfare-Warzone-Cheat">https://github.com/NMan1/Modern-Warfare-Warzone-Cheat</a><br />• <a href="https://github.com/hailzfn/IGodsEye-Reborn">https://github.com/hailzfn/IGodsEye-Reborn</a><br />   ◇ <a href="https://github.com/stuxnet147/IGodsEye-Reborn">https://github.com/stuxnet147/IGodsEye-Reborn</a> - backup<br /><br /><strong>External Source</strong><br />• <a href="https://github.com/zanzo420/mwclap">https://github.com/zanzo420/mwclap</a><br />• <a href="https://github.com/rmccrystal/modernwarfare-cheat-rs">https://github.com/rmccrystal/modernwarfare-cheat-rs</a><br />• <a href="https://github.com/zanzo420/mwclap">https://github.com/zanzo420/mwclap</a><br /><br /><strong>Examples</strong><br />• <a href="https://www.unknowncheats.me/forum/call-of-duty-modern-warfare/401549-simple-external-esp-source-warzone-season-4-a.html">https://www.unknowncheats.me/forum/call-of-duty-modern-warfare/401549-simple-external-esp-source-warzone-season-4-a.html</a><br />• <a href="https://www.unknowncheats.me/forum/call-of-duty-modern-warfare/452130-writing-external-esp-norecoil.html">https://www.unknowncheats.me/forum/call-of-duty-modern-warfare/452130-writing-external-esp-norecoil.html</a><br /><br /><strong>Tools</strong><br />• <a href="https://github.com/zanzo420/CoDMW-DecKeyDebugStep">https://github.com/zanzo420/CoDMW-DecKeyDebugStep</a> - Got cease and desisted. Original by spudgy<br />   ◇ <a href="https://github.com/zanzo420/CoDMW-DecKeyDebugStep">https://github.com/zanzo420/CoDMW-DecKeyDebugStep</a> - backup<br />• moleskn decryption tool (updated spudgy tool)<br />   ◇ <a href="https://www.unknowncheats.me/forum/3094002-post49.html">https://www.unknowncheats.me/forum/3094002-post49.html</a><br />   ◇ <a href="https://www.unknowncheats.me/forum/downloads.php?do=file&id=32796">https://www.unknowncheats.me/forum/downloads.php?do=file&amp;id=32796</a><br /><br /><strong>Links</strong><br />• <a href="https://www.unknowncheats.me/forum/2769704-post4.html">https://www.unknowncheats.me/forum/2769704-post4.html</a> - Post with links to other userful posts<br />• <a href="https://www.unknowncheats.me/forum/3028129-post2296.html">https://www.unknowncheats.me/forum/3028129-post2296.html</a> - Useful post<br />• <a href="https://www.unknowncheats.me/forum/2749029-post1079.html">https://www.unknowncheats.me/forum/2749029-post1079.html</a> - Python script with patterns<br />• <a href="https://www.unknowncheats.me/forum/2912567-post2052.html">https://www.unknowncheats.me/forum/2912567-post2052.html</a> - Start of new decryption?<br /><br /><strong>Refdef Decryption</strong><br />• <a href="https://www.unknowncheats.me/forum/3155934-post2562.html">https://www.unknowncheats.me/forum/3155934-post2562.html</a><br />• <a href="https://www.unknowncheats.me/forum/2801798-post1381.html">https://www.unknowncheats.me/forum/2801798-post1381.html</a><br /><br /><h2>## Anti-Cheat</h2><br />• <a href="https://www.unknowncheats.me/forum/call-of-duty-modern-warfare/385422-regarding-cod-mw-anti-cheat.html?s=5c7d36134b69585b0f4bdf3f7edc65d1">https://www.unknowncheats.me/forum/call-of-duty-modern-warfare/385422-regarding-cod-mw-anti-cheat.html?s=5c7d36134b69585b0f4bdf3f7edc65d1</a><br /><br />If internal, don&#39;t <code>AllocConsole</code>.<br />This creates a child window of the game and is easily detectable / bannable.<br /><br />If you crash the game while cheat devving, delete <code>crash.dmp</code> before rebooting.<br /><br /><strong>THE GAME WILL CRASH/WON&#39;T BOOT IF YOU HAVE KERNEL DEBUGGING ENABLED</strong><br />TURN IT OFF - <code>bcdedit /debug off</code><br /><br /><h3>### Delete IDA History</h3><br />It checks registry path of IDA to see if you&#39;ve opened the game.<br />If so, ban.<br /><br /><code>Computer\HKEY_CURRENT_USER\SOFTWARE\Hex-Rays\IDA\History</code><br /><code>Computer\HKEY_CURRENT_USER\SOFTWARE\Hex-Rays\IDA\History64</code><br /><br /><h3>### Test Mode</h3><br />Test mode with unsigned driver appears to be fine.<br /><a href="https://www.unknowncheats.me/forum/call-of-duty-modern-warfare/414346-cod-2019-anti-cheat.html">https://www.unknowncheats.me/forum/call-of-duty-modern-warfare/414346-cod-2019-anti-cheat.html</a><br /><br /><strong><h2>## Debugging</h2></strong><br />Apparently you can suspend the process with <code>resmon</code> and then attach debuggers.<br />You can get a static snapshot of memory this way.<br /><a href="https://www.unknowncheats.me/forum/call-of-duty-modern-warfare/438900-debug-mw-process-locking.html">https://www.unknowncheats.me/forum/call-of-duty-modern-warfare/438900-debug-mw-process-locking.html</a><br /><br />For figuring out the decryption routine,<br />&quot;I&#39;m pretty sure you can&#39;t do it statically, you have to run the game with DebugActiveProcess and step through every instruction and translate to cpp code&quot;<br />Source: <a href="https://www.unknowncheats.me/forum/3130668-post6.html">https://www.unknowncheats.me/forum/3130668-post6.html</a><br />&quot;Launch the process, wait exactly 5000ms, then call DebugActiveProcess. Look at MW-Dumper that moleskn posted as a resource.&quot;<br /><a href="https://www.unknowncheats.me/forum/3133872-post9.html">https://www.unknowncheats.me/forum/3133872-post9.html</a><br /><br /><h2>## Deobfuscation</h2><br />• <a href="https://www.unknowncheats.me/forum/2992132-post2245.html">https://www.unknowncheats.me/forum/2992132-post2245.html</a><br />• <a href="https://www.unknowncheats.me/forum/call-of-duty-modern-warfare/390209-deobfuscate-functions.html">https://www.unknowncheats.me/forum/call-of-duty-modern-warfare/390209-deobfuscate-functions.html</a> - How to deobfuscate protected functions<br />• <a href="https://github.com/patrickcjk/warzone-deobfuscator">https://github.com/patrickcjk/warzone-deobfuscator</a> - C# deobfuscator<br /><br /><strong><h2>## Dumping</h2></strong><br />Suspend the process with <code>resmon</code> and then dump (scylla, ksdumper, etc.). <br />That way you won&#39;t get banned<br /><br /><strong><h2>## Hooks</h2></strong><br />Hooks I&#39;ve seen people use.<br /><br /><code>G_RunFrame<br />Cmd_ExecuteSingleCommand<br />Dvar_FindMalleableVar<br />Dvar_FindVar<br />NtQueryVirtualMemory<br />VirtualQuery</code><br />Source: <a href="https://github.com/hailzfn/IGodsEye-Reborn/blob/master/Hook/Hook.cpp">https://github.com/hailzfn/IGodsEye-Reborn/blob/master/Hook/Hook.cpp</a><br /><br /><h2>## Offset Notes</h2><br />ClientInfo is what contains a pointer to <br />* ClientBase, which is essentially the entity <br />* list and can be indexed with PLAYER_SIZE.<br />* <br />* RefDef contains view related info like<br />* FOV and projection matrix; also encrypted <br />* <br />* Pointers to Client Info, Client Base, and<br />* RefDef are all encrypted and must first be decrypted<br />* <br />* Camera contains the local player&#39;s world location<br />* <br />* Name List contains both player name and health<br />* and is indexed using the same index number from ClientBase<br /><br /><h3>### Bones</h3><br />• <a href="https://github.com/rmccrystal/modernwarfare-cheat-rs/blob/7a8af41f143258553745e00427e58071f8bf8d73/src/sdk/bone.rs#L13">https://github.com/rmccrystal/modernwarfare-cheat-rs/blob/7a8af41f143258553745e00427e58071f8bf8d73/src/sdk/bone.rs#L13</a> - Bone IDs + Rust decryption<br />• <a href="https://www.unknowncheats.me/forum/3137482-post2490.html">https://www.unknowncheats.me/forum/3137482-post2490.html</a> - Bone discussion (keep scrolling for more info too. problem never gets resolved :/)<br /><br />The bones struct looks like this:<br /><div class="codebox"><div class="codebox"><span style="color:#ff9d00;font-weight:700">typedef</span>&nbsp;<span style="color:#ff9d00;font-weight:700">struct</span>&nbsp;{<br />	<span style="color:#7f0044;font-weight:400">char</span>&nbsp;pad1[<span style="color:#ff0044;font-weight:400">0x10</span>];		<span style="color:#0088ff;font-weight:400">//&nbsp;0x00</span><br />	vec3&nbsp;bone_pos;			<span style="color:#0088ff;font-weight:400">//&nbsp;0x10</span><br />	<span style="color:#7f0044;font-weight:400">char</span>&nbsp;pad2[<span style="color:#ff0044;font-weight:400">0x4</span>];		<span style="color:#0088ff;font-weight:400">//&nbsp;0x1C</span><br />}&nbsp;bone;						<span style="color:#0088ff;font-weight:400">//&nbsp;Size:&nbsp;0x20&nbsp;(26&nbsp;bones&nbsp;for&nbsp;each&nbsp;player)</span></div></div><br /><br />There&#39;s a base address at which the bones for every player is stored.<br />It&#39;s encrypted.<br />The value will be a 64bit address e.g. <code>0x1792478</code><br /><code>global::bones_base = decryption::get_bone_base();</code><br /><br />There&#39;s an index into this list which is the address of the all the bones for a specific player.<br />It&#39;s encrypted.<br />It will be a small value e.g. <code>0xf6</code><br /><code>uint64_t bone_ptr_index = decryption::get_bone_index(entity_id);</code><br /><br />To grab the start address of the list of bones for that player,<br />you can do: <code>bone_base_addr + (player_index * bone_struct_size) + 0xC0</code><br />(don&#39;t know what the C0 is)<br /><code>uint64_t bone_ptr = kread&lt;uint64_t&gt;(g_gamePID, global::bones_base + (bone_ptr_index * offsets::bones::size) + 0xC0);</code><br /><br />There&#39;s also a base position for the bones (don&#39;t understand this :shrug:)<br /><code>vec3 base_pos = kread&lt;vec3&gt;(g_gamePID, global::clientInfo_decrypted + offsets::bones::bone_base);</code><br /><br />To grab the bone position, do <code>bone_position + bone_base_position</code><br /><div class="codebox"><div class="codebox">bone_pos3d.x&nbsp;+=&nbsp;base_pos.x;<br />bone_pos3d.y&nbsp;+=&nbsp;base_pos.y;<br />bone_pos3d.z&nbsp;+=&nbsp;base_pos.z;</div></div></div>
</body>
</html>
