<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Devices</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>
<body>
<div class='page'><strong><h1># Linux - Devices</h1></strong><br />• When you connect a device to your machine, it needs a device driver to function properly<br />   ◇ hard drives<br />   ◇ usb sticks<br />   ◇ printers<br />   ◇ graphics cards<br />   ◇ etc.<br />• Device drivers are stored in device files<br />• Device files are stored in the <code>/dev</code> directory<br /><br /><code>lsusb</code> - list USB devices<br /><code>lspci</code> - list PCI devices<br /><code>lsscsi</code> - list SCSI devices<br /><br /><strong><h2>## Device types</h2></strong><br />Take a look at some devices:<br /><div class="codebox"><div class="codebox">$&nbsp;ls&nbsp;-l&nbsp;/dev<br /><br />brw-rw----&nbsp;&nbsp;&nbsp;1&nbsp;root&nbsp;disk&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8,&nbsp;&nbsp;&nbsp;0&nbsp;Dec&nbsp;20&nbsp;20:13&nbsp;sda<br />crw-rw-rw-&nbsp;&nbsp;&nbsp;1&nbsp;root&nbsp;root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,&nbsp;&nbsp;&nbsp;3&nbsp;Dec&nbsp;20&nbsp;20:13&nbsp;null<br />srw-rw-rw-&nbsp;&nbsp;&nbsp;1&nbsp;root&nbsp;root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;Dec&nbsp;20&nbsp;20:13&nbsp;log<br />prw-r--r--&nbsp;&nbsp;&nbsp;1&nbsp;root&nbsp;root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;Dec&nbsp;20&nbsp;20:13&nbsp;fdata</div></div><br /><br /><code>ls</code> lists the file type.<br />For device files, there are 4 file types:<br />• <strong>c</strong> - character<br />• <strong>b</strong> - block<br />• <strong>p</strong> - pipe<br />• <strong>s</strong> - socket<br /><br /><strong>Character Device</strong><br />• Character devices transfer data 1 character at a time. <br />• Lots of pseudo devices (like /dev/null) are character devices<br />   ◇ these devices aren&#39;t really physically connected to the machine, but they allow the operating system greater functionality<br /><strong>Block Device</strong><br />• Block devices transfer data in large fixed-sized blocks. <br />• Devices that utilize data blocks, such as harddrives, filesystems, etc. are block devices<br /><strong>Pipe Device</strong><br />• Pipe devices transfer data to another process<br /><strong>Socket Device</strong><br />• Socket devices transfer data between processes<br />• Unlike pipe devices, they can communicate with many processes at once<br /><br />~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br /><br /><strong><h2>Device names</h2></strong><br />The most common device names you&#39;ll encounter:<br /><br /><strong>SCSI Devices</strong><br />• Mass storage (hard drives etc.) are most likely using the SCSI protocol (pronounced &quot;scuzzy&quot;)<br />• SCSI stands for <em>Small Computer System Interface</em><br />• SCSI is used for communication between disks, printers, scanners and other peripherals to your system<br />• Linux systems correspond SCSI disks with hard disk drives in /dev. <br />   ◇ In /dev, they&#39;re represented by a prefix of sd (SCSI disk)<br />      ▪ <code>/dev/sda</code> - First hard disk<br />      ▪ <code>/dev/sdb</code> - Second hard disk<br />      ▪ <code>/dev/sda3</code> - Third partition on the first hard disk<br /><br /><strong>Pseudo Devices</strong><br />• Pseudo devices aren&#39;t physically connected to your system<br />• The most common pseudo devices are character devices: <br />   ◇ <code>/dev/zero</code> <br />      ▪ accepts and discards all input, produces a continuous stream of NULL (zero value) bytes<br />   ◇ <code>/dev/null</code><br />      ▪ accepts and discards all input, produces no output<br />   ◇ <code>/dev/random</code> <br />      ▪ produces random numbers<br /><br /><strong>PATA Devices</strong><br />• In older systems you might see hard drives being referred to with an hd prefix<br />   ◇ <code>/dev/hda</code> - First hard disk<br />   ◇ <code>/dev/hdd2</code> - Second partition on 4th hard disk<br /><br />~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br /><br /><strong><h2>sysfs</h2></strong><br />• Sysfs was created to better manage devices on your system that /dev fails to<br />• Sysfs is a virtual filesystem, often mounted to <code>/sys</code> directory. <br />• Sysfs gives you more detailed information about devices than the /dev directory<br />   ◇ manufacturer and model<br />   ◇ where the device is plugged in<br />   ◇ the state of the device<br />   ◇ the hierarchy of devices<br />   ◇ etc.<br />• The files in /sys aren&#39;t device nodes<br />   ◇ You don&#39;t interact with devices from the /sys directory, you manage them<br /><br /><strong>sysfs vs /dev</strong><br />• The /dev directory is used to allow other programs to access devices themselves<br />• The /sys filesystem is used to view information and manage the device<br /><br /><div class="codebox"><div class="codebox">pete@icebox:~$&nbsp;ls&nbsp;/sys/block/sda<br /><br />alignment_offset&nbsp;&nbsp;discard_alignment&nbsp;&nbsp;holders&nbsp;&nbsp;&nbsp;removable&nbsp;&nbsp;sda6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trace<br />bdi&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;events&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inflight&nbsp;&nbsp;ro&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uevent<br />capability&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;events_async&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;power&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sda1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slaves<br />dev&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;events_poll_msecs&nbsp;&nbsp;queue&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sda2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stat<br />device&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ext_range&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;range&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sda5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subsystem</div></div><br /><br /><strong><h2>udev</h2></strong><br />• udev dynamically creates and removes device files depending on whether or not they are connected<br />• udev has a udevd daemon running on the system<br />   ◇ This daemon listens for messages from the kernel about devices connected to the system<br />   ◇ udevd parses connected device information and follows the rules specified in <code>/etc/udev/rules.d</code><br />      ▪ The rules <em>most likely tell udev</em> to create device nodes and symbolic links for the connected device <br />▪ You can view the udev database and sysfs with - <code>udevadm</code><br />   - <code>udevadm info --query=all --name=/dev/sda</code><br /><br /></div>
</body>
</html>
