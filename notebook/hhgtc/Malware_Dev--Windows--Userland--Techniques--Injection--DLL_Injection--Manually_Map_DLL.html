<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Manually Map DLL</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>
<body>
<div class='page'><strong><h1># Manually Map DLL</h1></strong><br />• <a href="https://stackoverflow.com/questions/55768291/manual-dll-injection">https://stackoverflow.com/questions/55768291/manual-dll-injection</a><br /><br />Manually mapping a DLL involves writing the DLL into the target process, performing base relocations, and fixing all of its imported functions. <br />You&#39;re effectively doing what <code>LoadLibraryA</code> does but with your own code.<br /><br /><strong><h2>## The Problem with Manual Mapping - Loading Extra Libraries</h2></strong><br />The problem with manually mapping a DLL is loading the extra libraries your injected DLL needs in the target process.<br />E.g:<br />Your injected DLL uses the <code>MessageBoxA</code> function, but <code>USER32.dll</code> (which contains MessageBoxA) doesn&#39;t exist in the target process you&#39;re injecting into.<br />If you loaded your DLL via LoadLibrary(), it would load the extra modules your DLL needs for you. <br />But when you manual map, you have to do this yourself or don&#39;t do it all (and hope your code works/pick your target process carefully).<br /><br />You have two options:<br />• A shellcode-free manual mapper<br />   ◇ Where you fix your DLL&#39;s imports and base relocations first, and then write it into the target process, meaning no extra modules that your DLL needs are imported<br />   ◇ This is easier<br />• Writing shellcode into the target process which fixes your DLL&#39;s imports and performs base relocations, and then executes your injected DLL<br />   ◇ Because this shellcode runs in the target process, we can load any extra modules our injected DLL needs<br /></div>
</body>
</html>
