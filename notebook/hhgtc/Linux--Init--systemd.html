<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>systemd</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>
<body>
<div class='page'><strong><h1># Linux - Init - systemd</h1></strong><br />• Systemd is slowly becoming the emerging standard for init<br />• If you have a <code>/usr/lib/systemd</code> directory, you&#39;re most likely using systemd<br />• Systemd uses goals to get your system up and running<br />   ◇ The system has a target to achieve<br />   ◇ and this target also has dependencies it needs to achieve<br />• Systemd does not follow a strict sequence to get processes started<br />   ◇ It&#39;s extremely flexible and robust<br /><br /><strong><h2>## Systemd Boot</h2></strong><br />A typical systemd boot looks like this:<br /><br />1. systemd loads its configuration files<br />   ◇ Located in <code>/etc/systemd/system</code> or <code>/usr/lib/systemd/system</code><br />2. systemd determines its boot goal<br />   ◇ usually <code>default.target</code> - which (usually) points to graphical.target<br />3. systemd discovers the dependencies of the boot target and activates them<br /><br />Systemd boots into different targets:<br />   ◇ <code>poweroff.target</code> - shutdown system<br />   ◇ <code>rescue.target</code> - single user mode<br />   ◇ <code>multi-user.target</code> - multiuser with networking<br />   ◇ <code>graphical.target</code> - multiuser with networking and GUI<br />   ◇ <code>reboot.target</code> - restart<br />(this is similar to Sys V&#39;s runlevels)<br /><br /><strong><h2>## Systemd Units</h2></strong><br />• Systemd works with files/objects known as units<br />• Systemd doesn&#39;t just stop and start services, it can also<br />   ◇ mount filesystems<br />   ◇ monitor your network sockets<br />   ◇ etc<br />• Because of this extra functionality, systemd as different types of units it operates<br />• The most common units are:<br />   ◇ Service units <br />      ▪ service units start and stop services - these unit file end in .service<br />   ◇ Mount units <br />      ▪ mount units mount filesystems - these unit files end in .mount<br />   ◇ Target units<br />      ▪ target units group together other units - these unit files end in .target<br />• For example, default.target groups together<br />   ◇ networking.service<br />   ◇ crond.service<br />   ◇ etc.<br /><br /><strong><h2>## Systemd Unit Files</h2></strong><br />A basic service unit file - foobar.service - might look like this:<br /><div class="codebox"><div class="codebox">[Unit]<br />Description=My&nbsp;Foobar<br />Before=bar.target<br /><br />[Service]<br />ExecStart=/usr/bin/foobar<br /><br />[Install]<br />WantedBy=multi-user.target</div></div><br /><br /><strong>[Unit]</strong><br />• Can give the unit file a description<br />• And control the order of when to activate the unit. <br /><br /><strong>[Service]</strong><br />• Here you can can start, stop or reload a service. <br /><br /><strong>[Install]</strong><br />• [Install] is used for dependencies<br /><br /><strong><h2>## Systemd Commands</h2></strong><br /><code>systemctl list-units</code> - List units<br /><code>systemctl status networking.service</code> - View status of unit<br /><code>sudo systemctl start networking.service</code> - Start a service<br /><code>sudo systemctl stop networking.service</code> - Stop a service<br /><code>sudo systemctl restart networking.service</code> - Restart a service<br /><code>sudo systemctl enable networking.service</code> - Enable a unit<br /><code>sudo systemctl disable networking.service</code> - Disable a unit<br /><br /></div>
</body>
</html>
