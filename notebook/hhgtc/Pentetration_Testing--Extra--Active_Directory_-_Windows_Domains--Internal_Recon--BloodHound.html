<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>BloodHound</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>
<body>
<div class='page'><strong><h1># Internal Recon - BloodHound</h1></strong><br /><a href="https://github.com/BloodHoundAD/BloodHound">https://github.com/BloodHoundAD/BloodHound</a><br /><br /><strong><h2>## About BloodHound</h2></strong><br />• JavaScript application that creates a GUI map of Active Directory<br />• Uses graph theory for mapping the shortest paths between Domain Admins<br />• Has built-in queries to do stuff<br />• Supports custom Cypher queries<br />• BloodHound only shows a SNAPSHOT of the current state of the domain<br /><br />Problems:<br />• Very noisy when run with default config<br />   ◇ cause network spikes -&gt; get detected<br /><br />Nikhil Mathil believes BloodHound is more useful to blue-teamers than red-teamers.<br />Red-teamers can just use PowerView.<br />BUT, BloodHound makes visualising Active Directory relationships super easy.<br /><br />BloodHound has 2 parts:<br />• <code>Ingestors</code> - scripts that collect data (run on target host)<br />• <code>GUI Application</code> - where you upload the data and run queries (do on attacker host)<br /><br />Shortcuts:<br />• CTRL - toggle node labels<br /><br /><strong><h2>## Usage<br /></h2></strong><strong><h3>### Ingestors (Collect Data)</h3></strong><br />Run <code>SharpHound.ps1</code> or <code>SharpHound</code> C# executable.<br />(the .exe is faster)<br />This will create a .zip of AD data in the directory you ran the ingestor.<br /><br />• It&#39;s best to run the ingester as a user that&#39;s a member of the domain (not a local user)<br /><br /><strong>.ps1</strong><br /><code>BloodHound-master\Ingestors\SharpHound.ps1</code><br /><br /><code>Invoke-BloodHound -CollectionMethod All</code><br />   ◇ the generated archive can be uploaded to BloodHoud<br />   ◇ Avoid ATA detections - <code>Invoke-BloodHound -CollectionMethod All -ExcludeDC</code><br />Sometimes BloodHound misses sessions. Get them yourself:<br /><code>Invoke-BloodHound -CollectionMethod LoggedOn</code> <br /><br /><strong><h3>### GUI (Browse Results)</h3></strong><br />Default creds &lt;- these need to be changed on first run:<br /><code>neo4j / neo4j</code><br /><br />1. Install BloodHound + Neo4j service - <code>sudo apt install bloodhound</code><br />2. Start Neo4j service - <code>sudo neo4j console</code><br />3. If first time running, log in to <code>localhost:7474</code> with <code>neo4j / neo4j</code> and change credentials<br />4. Start bloodhound from terminal &amp; log in - <code>bloodhound</code><br />5. Drag and drop the Ingestor&#39;s .zip into the GUI<br /><br />Cheat sheet<br /><a href="https://hausec.com/2019/09/09/bloodhound-cypher-cheatsheet/">https://hausec.com/2019/09/09/bloodhound-cypher-cheatsheet/</a><br /><br /></div>
</body>
</html>
