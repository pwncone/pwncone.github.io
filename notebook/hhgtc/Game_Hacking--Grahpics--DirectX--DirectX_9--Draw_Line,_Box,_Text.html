<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Draw Line, Box, Text</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>
<body>
<div class='page'><strong><h1># DirectX9 - Draw Line, Box, and Text</h1></strong><br />Basic functions to draw a line, a box, and text.<br />Will (most likely) get updated when I find a better and/or new methods to draw.<br /><br /><div class="codebox"><div class="codebox">#include&nbsp;&lt;Windows.h&gt;<br />#include&nbsp;&lt;d3d9.h&gt;<br />#include&nbsp;&lt;d3dx9.h&gt;<br />#include&nbsp;&lt;stdio.h&gt;<br /><br />#pragma&nbsp;comment(lib,&nbsp;&quot;d3d9.lib&quot;)<br /><br />//&nbsp;Direct3d<br />LPDIRECT3D9&nbsp;d3d&nbsp;=&nbsp;NULL;					//&nbsp;Pointer&nbsp;to&nbsp;our&nbsp;Direct3d&nbsp;interface<br />LPDIRECT3DDEVICE9&nbsp;d3d_device&nbsp;=&nbsp;NULL;	//&nbsp;Pointer&nbsp;to&nbsp;the&nbsp;device&nbsp;class<br />LPD3DXLINE&nbsp;d3dx_line&nbsp;=&nbsp;NULL;<br />LPD3DXFONT&nbsp;d3dx_font&nbsp;=&nbsp;NULL;<br />int&nbsp;font_height&nbsp;=&nbsp;16;<br />D3DCOLOR&nbsp;d3d_white&nbsp;=&nbsp;D3DCOLOR_ARGB(255,&nbsp;255,&nbsp;255,&nbsp;255);<br />D3DCOLOR&nbsp;d3d_red&nbsp;=&nbsp;D3DCOLOR_ARGB(255,&nbsp;255,&nbsp;0,&nbsp;0);<br />D3DCOLOR&nbsp;d3d_green&nbsp;=&nbsp;D3DCOLOR_ARGB(255,&nbsp;0,&nbsp;255,&nbsp;0);<br />D3DCOLOR&nbsp;d3d_orange&nbsp;=&nbsp;D3DCOLOR_ARGB(255,&nbsp;255,&nbsp;103,&nbsp;0);<br />D3DCOLOR&nbsp;d3d_light_blue&nbsp;=&nbsp;D3DCOLOR_ARGB(255,&nbsp;79,&nbsp;185,&nbsp;255);<br /><br />//&nbsp;Maths<br />typedef&nbsp;struct&nbsp;Vector2<br />{&nbsp;<br />	float&nbsp;x,&nbsp;y;<br />}&nbsp;vec2;<br /><br />void&nbsp;DrawLine(vec2&nbsp;src,&nbsp;vec2&nbsp;dest,&nbsp;float&nbsp;thickness,&nbsp;D3DCOLOR&nbsp;colour)<br />{<br />	//&nbsp;Create&nbsp;a&nbsp;d3dx&nbsp;line<br />	//&nbsp;Creating&nbsp;a&nbsp;d3dx&nbsp;line&nbsp;every&nbsp;time&nbsp;is&nbsp;inefficient,&nbsp;so&nbsp;only&nbsp;create&nbsp;one&nbsp;if&nbsp;we&nbsp;don&#39;t&nbsp;have&nbsp;one&nbsp;already<br />	if&nbsp;(d3dx_line&nbsp;==&nbsp;NULL)<br />		D3DXCreateLine(d3d_device,&nbsp;&amp;d3dx_line);<br /><br />	D3DXVECTOR2&nbsp;vertex_list[2];<br />	vertex_list[0]&nbsp;=&nbsp;(D3DXVECTOR2){&nbsp;src.x,&nbsp;src.y&nbsp;};<br />	vertex_list[1]&nbsp;=&nbsp;(D3DXVECTOR2){&nbsp;dest.x,&nbsp;dest.y&nbsp;};<br />	d3dx_line-&gt;lpVtbl-&gt;SetWidth(d3dx_line,&nbsp;thickness);<br />	d3dx_line-&gt;lpVtbl-&gt;Draw(d3dx_line,&nbsp;vertex_list,&nbsp;2,&nbsp;colour);<br /><br />	return;<br />}<br /><br />void&nbsp;DrawRectangle(vec2&nbsp;top,&nbsp;vec2&nbsp;bot,&nbsp;float&nbsp;thickness,&nbsp;D3DCOLOR&nbsp;colour)<br />{<br />	//&nbsp;Calculate&nbsp;height&nbsp;of&nbsp;the&nbsp;rectangle<br />	//&nbsp;abs()&nbsp;will&nbsp;always&nbsp;return&nbsp;a&nbsp;positive&nbsp;value.&nbsp;fabsf()&nbsp;is&nbsp;the&nbsp;float&nbsp;version.<br />	float&nbsp;height&nbsp;=&nbsp;fabsf(bot.y&nbsp;-&nbsp;top.y);<br />	float&nbsp;width&nbsp;=&nbsp;height&nbsp;/&nbsp;4;<br /><br />	//&nbsp;x&nbsp;is&nbsp;at&nbsp;plus/minus&nbsp;width&nbsp;of&nbsp;box<br />	vec2&nbsp;top_left,&nbsp;top_right;<br />	top_left.x&nbsp;=&nbsp;top.x&nbsp;-&nbsp;width;<br />	top_right.x&nbsp;=&nbsp;top.x&nbsp;+&nbsp;width;<br />	top_left.y&nbsp;=&nbsp;top.y;<br />	top_right.y&nbsp;=&nbsp;top.y;<br /><br />	vec2&nbsp;bot_left,&nbsp;bot_right;<br />	bot_left.x&nbsp;=&nbsp;bot.x&nbsp;-&nbsp;width;<br />	bot_right.x&nbsp;=&nbsp;bot.x&nbsp;+&nbsp;width;<br />	bot_left.y&nbsp;=&nbsp;bot.y;<br />	bot_right.y&nbsp;=&nbsp;bot.y;<br /><br />	//&nbsp;Draw&nbsp;the&nbsp;rectangle<br />	DrawLine(top_left,&nbsp;top_right,&nbsp;thickness,&nbsp;colour);<br />	DrawLine(top_right,&nbsp;bot_right,&nbsp;thickness,&nbsp;colour);<br />	DrawLine(bot_right,&nbsp;bot_left,&nbsp;thickness,&nbsp;colour);<br />	DrawLine(bot_left,&nbsp;top_left,&nbsp;thickness,&nbsp;colour);<br /><br />	return;<br />}<br /><br />void&nbsp;PrintText(int&nbsp;x,&nbsp;int&nbsp;y,&nbsp;D3DCOLOR&nbsp;colour,&nbsp;const&nbsp;char*&nbsp;format,&nbsp;...)<br />{<br />	//&nbsp;Create&nbsp;a&nbsp;d3dx&nbsp;font&nbsp;if&nbsp;we&nbsp;don&#39;t&nbsp;have&nbsp;one<br />	if&nbsp;(d3dx_font&nbsp;==&nbsp;NULL)<br />		D3DXCreateFontA(d3d_device,&nbsp;font_height,&nbsp;0,&nbsp;FW_NORMAL,&nbsp;1,&nbsp;FALSE,&nbsp;ANSI_CHARSET,&nbsp;OUT_TT_PRECIS,&nbsp;PROOF_QUALITY,&nbsp;FF_DONTCARE&nbsp;|&nbsp;DEFAULT_PITCH,&nbsp;&quot;Consolas&quot;,&nbsp;&amp;d3dx_font);<br /><br />	RECT&nbsp;font_rect&nbsp;=&nbsp;{&nbsp;0&nbsp;};<br />	font_rect.left&nbsp;=&nbsp;x;<br />	font_rect.right&nbsp;=&nbsp;x&nbsp;+&nbsp;1001;<br />	font_rect.top&nbsp;=&nbsp;y;<br />	font_rect.bottom&nbsp;=&nbsp;y&nbsp;+&nbsp;1001;<br /><br />	char&nbsp;text[100]&nbsp;=&nbsp;{&nbsp;0&nbsp;};<br />	va_list&nbsp;args;<br />	va_start(args,&nbsp;format);<br />	vsprintf_s(text,&nbsp;100,&nbsp;format,&nbsp;args);<br />	va_end(args);<br /><br />	//&nbsp;Draw&nbsp;font&nbsp;and&nbsp;align&nbsp;to&nbsp;LEFT&nbsp;and&nbsp;TOP&nbsp;of&nbsp;rectangle<br />	d3dx_font-&gt;lpVtbl-&gt;DrawTextA(d3dx_font,&nbsp;NULL,&nbsp;text,&nbsp;-1,&nbsp;&amp;font_rect,&nbsp;DT_LEFT&nbsp;|&nbsp;DT_TOP,&nbsp;colour);<br /><br />	return;<br />}<br /><br />vec2&nbsp;line_start&nbsp;=&nbsp;{&nbsp;120,&nbsp;90&nbsp;};<br />vec2&nbsp;line_end&nbsp;=&nbsp;{&nbsp;300,&nbsp;110&nbsp;};<br />DrawLine(line_start,&nbsp;line_end,&nbsp;4.0f,&nbsp;d3d_green);<br />vec2&nbsp;rect_top&nbsp;=&nbsp;{&nbsp;50,&nbsp;120&nbsp;};<br />vec2&nbsp;rect_bot&nbsp;=&nbsp;{&nbsp;50,&nbsp;180&nbsp;};<br />DrawRectangle(rect_top,&nbsp;rect_bot,&nbsp;3.0f,&nbsp;d3d_light_blue);<br />float&nbsp;distance&nbsp;=&nbsp;3.4f;<br />PrintText(100,&nbsp;80,&nbsp;d3d_orange,&nbsp;&quot;ahoy&nbsp;there!&nbsp;distance:&nbsp;%f&quot;,&nbsp;distance);</div></div></div>
</body>
</html>
