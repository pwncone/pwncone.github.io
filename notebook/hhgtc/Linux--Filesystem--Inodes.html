<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Inodes</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>
<body>
<div class='page'><strong><h1># Linux - Filesystem - Inodes</h1></strong><br />• Every file on your system has a corresponding inode.<br />• The inode describes everything about that file, such as:<br />   ◇ File type - regular file, directory, character device, etc<br />   ◇ Owner<br />   ◇ Group<br />   ◇ Access permissions<br />   ◇ Timestamps<br />      ▪ mtime (time of last file modification)<br />      ▪ ctime (time of last attribute change)<br />      ▪ atime (time of last access)<br />   ◇ Number of hardlinks to the file<br />   ◇ Size of the file<br />   ◇ Number of blocks allocated to the file<br />   ◇ Pointers to the data blocks of the file - most important!<br /><br />Inodes store all information about the file, except the filename/directory and the file itself.<br /><br /><strong><h2>## When are inodes created?</h2></strong><br />• Space for inodes is allocated when the filesystem is created<br />• Algorithms run to determine how much inode space you need depending on the size of the disk (and more)<br />• It&#39;s possible to run out of inodes and, therefore, be unable to create more files.  <br />   ◇ Data storage depends on both the data and its database (inodes)<br /><br /><code>df -i</code> - view how many inodes are left on your system<br /><br /><strong><h2>## Inode Information</h2></strong><br />• Inodes are identified by numbers<br />• When a file gets created it is assigned an inode number<br />   ◇ The numbers are assigned in sequential order <br /><br /><code>ls -li</code> - view inode numbers<br /><div class="codebox"><div class="codebox">pete@icebox:~$&nbsp;ls&nbsp;-li<br />140&nbsp;drwxr-xr-x&nbsp;2&nbsp;pete&nbsp;pete&nbsp;6&nbsp;Jan&nbsp;20&nbsp;20:13&nbsp;Desktop<br />141&nbsp;drwxr-xr-x&nbsp;2&nbsp;pete&nbsp;pete&nbsp;6&nbsp;Jan&nbsp;20&nbsp;20:01&nbsp;Documents</div></div><br /><br /><code>stat &lt;file&gt;</code> - list detailed informatino about a file + inode number<br /><div class="codebox"><div class="codebox">pete@icebox:~$&nbsp;stat&nbsp;~/Desktop/<br />&nbsp;&nbsp;File:&nbsp;‘/home/pete/Desktop/’<br />&nbsp;&nbsp;Size:&nbsp;6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Blocks:&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IO&nbsp;Block:&nbsp;4096&nbsp;&nbsp;&nbsp;directory<br />Device:&nbsp;806h/2054d&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Inode:&nbsp;140&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Links:&nbsp;2<br />Access:&nbsp;(0755/drwxr-xr-x)&nbsp;&nbsp;Uid:&nbsp;(&nbsp;1000/&nbsp;&nbsp;&nbsp;pete)&nbsp;&nbsp;&nbsp;Gid:&nbsp;(&nbsp;1000/&nbsp;&nbsp;&nbsp;pete)<br />Access:&nbsp;2016-01-20&nbsp;20:13:50.647435982&nbsp;-0800<br />Modify:&nbsp;2016-01-20&nbsp;20:13:06.191675843&nbsp;-0800<br />Change:&nbsp;2016-01-20&nbsp;20:13:06.191675843&nbsp;-0800<br />&nbsp;Birth:&nbsp;-</div></div><br /><br /><strong><h2>## How do inodes locate files?</h2></strong><br />• Inodes point to the actual data blocks of your files.<br />• Each inode contains 15 pointers: <br />   ◇ The first 12 pointers point directly to the data blocks<br />   ◇ The 13th pointer points to a block which contains pointers to more blocks<br />   ◇ The 14th pointer points to a nested block of pointers<br />   ◇ The 15th pointer points (again) to another block of pointers<br />• This keeps the inode structure the same for every inode<br />   ◇ and means that inodes can reference different file sizes<br />      ▪ small files you can find quicker with the first 12 direct pointers<br />      ▪ larger files you can find with the nests of pointers<br /></div>
</body>
</html>
