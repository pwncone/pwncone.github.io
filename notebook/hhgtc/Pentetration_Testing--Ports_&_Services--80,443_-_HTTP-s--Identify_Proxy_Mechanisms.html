<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Identify Proxy Mechanisms</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>
<body>
<div class='page'><strong><h1>#Identify Proxy Mechanisms</h1></strong><br />Load balancers and reverse proxies are commonplace in large environments.<br />They&#39;re used to distribute and direct requests across multiple back end application servers.<br /><br /><strong><h2>## Send a HEAD request</h2></strong><br />An easy way of identifying a server forwarding connections elsewhere is to provide a <code>HEAD</code> request with no <code>Host</code> field<br /><br /><code>telnet www.akamai.com 80<br />HEAD / HTTP/1.0</code><br /><br />In the example below we can see that by not including a <code>Host</code> header, <br />we&#39;ve hit an AkamaiGHost server.<br /><br /><code>AkamaiGHost</code> stands for <code>Akamai Global Host</code> (an edge server).<br /><div class="codebox"><div class="codebox">root@kali:~#&nbsp;telnet&nbsp;www.akamai.com&nbsp;80<br />Trying&nbsp;69.192.141.233...<br />Connected&nbsp;to&nbsp;e8921.dscx.akamaiedge.net.<br />Escape&nbsp;character&nbsp;is&nbsp;&#39;^]&#39;.<br />HEAD&nbsp;/&nbsp;HTTP/1.0<br /><br />HTTP/1.0&nbsp;400&nbsp;Bad&nbsp;Request<br />Server:&nbsp;AkamaiGHost<br />Mime-Version:&nbsp;1.0<br />Content-Type:&nbsp;text/html<br />Content-Length:&nbsp;193<br />338&nbsp;|&nbsp;Chapter&nbsp;13:&nbsp;Assessing&nbsp;Web&nbsp;Servers<br />Expires:&nbsp;Tue,&nbsp;12&nbsp;Aug&nbsp;2014&nbsp;03:30:17&nbsp;GMT<br />Date:&nbsp;Tue,&nbsp;12&nbsp;Aug&nbsp;2014&nbsp;03:30:17&nbsp;GMT<br />Connection:&nbsp;close<br /><br />Connection&nbsp;closed&nbsp;by&nbsp;foreign&nbsp;host.</div></div><br /><br />Next, by sending a <code>Host</code> header containing the website we want to browse, we can see that we&#39;ve hit the site.<br />From this, we can tell that <code>www.akamai.com</code> is sat behind an edge server.<br /><br /><code>telnet www.akamai.com 80<br />HEAD / HTTP/1.1<br />Host: www.akamai.com</code><br /><br /><div class="codebox"><div class="codebox">root@kali:~#&nbsp;telnet&nbsp;www.akamai.com&nbsp;80<br />Trying&nbsp;69.192.141.233...<br />Connected&nbsp;to&nbsp;e8921.dscx.akamaiedge.net.<br />Escape&nbsp;character&nbsp;is&nbsp;&#39;^]&#39;.<br />HEAD&nbsp;/&nbsp;HTTP/1.1<br />Host:&nbsp;www.akamai.com<br /><br />HTTP/1.1&nbsp;200&nbsp;OK<br />Last-Modified:&nbsp;Wed,&nbsp;23&nbsp;Jul&nbsp;2014&nbsp;20:10:01&nbsp;GMT<br />ETag:&nbsp;&quot;a8030-31b9-4fee1ecd01840&quot;<br />Content-Type:&nbsp;text/html;&nbsp;charset=utf-8<br />X-EdgeConnect-Cache-Status:&nbsp;1<br />Date:&nbsp;Tue,&nbsp;12&nbsp;Aug&nbsp;2014&nbsp;03:30:27&nbsp;GMT<br />Connection:&nbsp;keep-alive<br />Set-Cookie:&nbsp;cm_sessionid=7e9dfea542730000538ae95328f4080043090500;&nbsp;path=/</div></div><br /><br /><strong><h2>## Abuse Proxies by Modifying Host Field</h2></strong><br />You can abuse misconfigured proxies by modifying the <code>Host</code> field in your HTTP request.<br /><br />If you provide an:<br />• internal IP address<br />• or a valid hostname<br />you might be able to direct your connection through the accessible web server to a non-public resource <br />e.g. <code>dev.website.com</code></div>
</body>
</html>
