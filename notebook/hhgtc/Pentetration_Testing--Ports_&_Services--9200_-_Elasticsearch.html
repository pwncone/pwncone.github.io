<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>9200 - Elasticsearch</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>
<body>
<div class='page'><strong><h1># Port 9200 - Elasticsearch</h1></strong><br />Elasticsearch is an open source search and analytics engine designed for scalability.<br /><br />I learnt how to use elasticsearch in a CTF by reading the docs:<br /><a href="https://www.elastic.co/guide/en/elasticsearch/reference/6.1/_list_all_indices.html">https://www.elastic.co/guide/en/elasticsearch/reference/6.1/_list_all_indices.html</a><br /><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-search.html">https://www.elastic.co/guide/en/elasticsearch/reference/current/search-search.html</a><br /><br /><strong>ELK Stack</strong><br />Elasticsearch is also part of the wider ELK stack - Elasticsearch, Kibana and Logstash<br /><a href="https://www.elastic.co/what-is/elk-stack">https://www.elastic.co/what-is/elk-stack</a><br /><br /><strong><h2>## Listing data</h2></strong><br />Indexes contain data.<br />We can list all indexes in the database using <code>/_cat/indices?v</code><br /><a href=""><img src="images/150-1.png" alt="images/150-1.png" /></a><br /><br />Then we can list all the data in an index using:<br /><code>/&lt;index&gt;/_search?=pretty</code><br /><br />By default, <code>elasticsearch</code> will only return 10 results. You can get more results using <code>?size</code>:<br /><code>&lt;index&gt;/_search?size=100</code><br /><br /><strong><h2>## Search for data with Elastic&#39;s query language</h2></strong><br />You can query/search through indexes using <code>elasticsearch</code>&#39;s query language.<br /><a href="https://www.elastic.co/guide/en/elasticsearch/reference/6.4/getting-started-query-lang.html">https://www.elastic.co/guide/en/elasticsearch/reference/6.4/getting-started-query-lang.html</a><br /><br /><strong>Example:</strong><br /><em>Search through the </em><em><code>quote</code></em><em> field in the </em><em><code>quotes</code></em><em> index for </em><em><code>clave</code></em><br />Here&#39;s a Burp querying do just that:<br /><div class="codebox"><div class="codebox">GET&nbsp;/quotes/_search&nbsp;HTTP/1.1<br />Host:&nbsp;10.10.10.115:9200<br />User-Agent:&nbsp;Mozilla/5.0&nbsp;(X11;&nbsp;Linux&nbsp;i686;&nbsp;rv:60.0)&nbsp;Gecko/20100101&nbsp;Firefox/60.0<br />Accept:&nbsp;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8<br />Accept-Language:&nbsp;en-US,en;q=0.5<br />Accept-Encoding:&nbsp;gzip,&nbsp;deflate<br />Connection:&nbsp;close<br />Upgrade-Insecure-Requests:&nbsp;1<br />Content-Length:&nbsp;54<br />Content-Type:&nbsp;application/json<br /><br />{<br />&nbsp;&nbsp;&quot;query&quot;:&nbsp;{&nbsp;&quot;match&quot;:&nbsp;{&nbsp;&quot;quote&quot;:&nbsp;&quot;clave&quot;&nbsp;}&nbsp;}<br />}</div></div></div>
</body>
</html>
