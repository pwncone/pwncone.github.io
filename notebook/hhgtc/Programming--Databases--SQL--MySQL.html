<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>MySQL</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>
<body>
<div class='page'><strong><h2>Cheat Sheet</h2></strong><br />MySQL commands cheat sheet, brilliant: <a href="https://devhints.io/mysql">https://devhints.io/mysql</a><br /><br /><strong><h2>Personal Cheat Sheet</h2></strong><br />Log in<br /><code>sudo mysql -u root</code><br /><code>sudo mysql</code><br /><code>sudo mysql -u root -p</code><br /><br />Change root password<br /><code>ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED WITH mysql_native_password BY &#39;toor&#39;;</code><br /><br />Show databases<br /><code>show databases;</code><br /><br />Create database<br /><code>CREATE DATABASE my_database;</code><br /><br />Use database<br /><code>USE my_database;</code><br /><br />Delete table<br /><code>DROP TABLE IF EXISTS `accounts`;</code><br /><br />Create table with values<br /><code>CREATE TABLE `accounts` (<br />    `acc_number` INTEGER NOT NULL AUTO_INCREMENT,<br />    `acc_username` MEDIUMTEXT NULL DEFAULT NULL,<br />    `acc_password` MEDIUMTEXT NULL DEFAULT NULL,<br />    `acc_fail_count` INTEGER NOT NULL DEFAULT 0,<br />    `acc_last_login` DATETIME NULL DEFAULT NULL,<br />    PRIMARY KEY (`acc_number`)<br />);</code><br /><br />Change datatype of column<br /><code>ALTER TABLE accounts MODIFY COLUMN acc_fail_count INTEGER;</code><br /><br />Rename column<br /><code>ALTER TABLE cmds RENAME COLUMN &quot;acc_name&quot; TO &quot;acc_username&quot;;</code><br /><br />Change column name and datatype<br /><code>ALTER TABLE accounts CHANGE COLUMN `acc_name` `acc_username` MEDIUMTEXT;</code><br /><br />Insert data into table<br /><code>INSERT INTO accounts<br />(<br />	acc_username, <br />	acc_password <br />) <br />VALUES<br />(<br />	&quot;test&quot;,<br />	&quot;password&quot;<br />);</code><br /><br />Update value in table<br /><code>UPDATE accounts SET acc_password = &#39;password2&#39; WHERE acc_username=&#39;test&#39;;</code><br /><br />Retrieve only 1 result from SQL query - <code>LIMIT 0,1;</code><br /><code>SELECT acc_username FROM accounts WHERE acc_number=&#39;55&#39; LIMIT 0,1;</code><br /><br /><code>NOW()</code> - current date/time<br /><br /><strong><h2>Python&#39;s pymysql Library</h2></strong><br />Python has a library called <code>pymysql</code> which interacts with sql databases nicely.<br /><br />This code is from hackthebox Craft.<br />Put your connection settings in a <code>settings.py</code> file, or just write them into the script directly.<br /><div class="codebox"><div class="codebox">import&nbsp;pymysql<br />import&nbsp;settings<br /><br />#&nbsp;test&nbsp;connection&nbsp;to&nbsp;mysql&nbsp;database<br /><br />connection&nbsp;=&nbsp;pymysql.connect(host=settings.MYSQL_DATABASE_HOST,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;user=settings.MYSQL_DATABASE_USER,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;password=settings.MYSQL_DATABASE_PASSWORD,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db=settings.MYSQL_DATABASE_DB,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cursorclass=pymysql.cursors.DictCursor)<br /><br />#&nbsp;run&nbsp;sql&nbsp;statements&nbsp;against&nbsp;database<br /><br />try:&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;connection.cursor()&nbsp;as&nbsp;cursor:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sql&nbsp;=&nbsp;&quot;SELECT&nbsp;*&nbsp;from&nbsp;user&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cursor.execute(sql)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;=&nbsp;cursor.fetchall()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(result)<br /><br />finally:<br />&nbsp;&nbsp;&nbsp;&nbsp;connection.close()&nbsp;</div></div><br /><br /></div>
</body>
</html>
