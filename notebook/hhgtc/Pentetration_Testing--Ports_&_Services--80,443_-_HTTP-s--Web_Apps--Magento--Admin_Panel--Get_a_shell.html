<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Get a shell</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>
<body>
<div class='page'><strong><h1># Magento - Get a shell</h1></strong><br />I think there are multiple ways to get on a shell on Magento via the Admin panel.<br />Methods might also differ based version number and the type of Magento that&#39;s running (open-source Magento, e-commerce Magento, etc.)<br /><br /><strong><h2>## via the Filesystem Plugin</h2></strong><br /><strong>Examples:</strong><br />• Used in hackthebox SwagShop<br />• Video example here - <a href="https://youtu.be/TBJowyKUEqE?t=362">https://youtu.be/TBJowyKUEqE?t=362</a><br /><br />To get a shell via the Magento Admin Panel we need to modify a <code>.php</code> file. <br />In order to modify a <code>.php</code> file we need the <code>Filesystem</code> plugin, which currently isn&#39;t installed.<br /><a href=""><img src="images/242-1.png" alt="images/242-1.png" /></a><br /><br /><strong><h3>### 1. Upload Filesystem plugin</h3></strong><br />1) Go to Magento Connect Manager - <code>http://10.10.10.140/downloader</code> - and log in using admin credentials<br />2) Upload the filesystem plugin - <a href="https://pluginarchive.com/magento/magpleasure_filesystem">https://pluginarchive.com/magento/magpleasure_filesystem</a><br /><br /><strong><h3>### Modify a .php file</h3></strong><br />3) Go to the Magento Admin Panel - <code>http://10.10.10.140/index.php/admin</code><br /><br />The <em>Filesystem</em> plugin should now be there. <br /><br />4. Navigate to System tab &gt; Filesystem &gt; IDE<br />   <a href=""><img src="images/242-2.png" alt="images/242-2.png" /></a><br />5) Pick a <code>.php</code> file to edit and copy/paste in your reverse shell, replacing the code that&#39;s already there. <br />   Make sure the file is publicly accessible (don&#39;t use index.php and ruin the box for others). <br />   I chose <code>/install.php</code><br />   <a href=""><img src="images/242-3.png" alt="images/242-3.png" /></a><br />   <br />6) Start a listener on your attacking machine <br />    <div class="codebox"><div class="codebox">root@gotham:~/ctf/swagshop/80http/exploits#&nbsp;nc&nbsp;-lvnp&nbsp;9001<br />listening&nbsp;on&nbsp;[any]&nbsp;9001&nbsp;...</div></div><br /><br />7) And access the <code>.php</code> file you edited on the website to trigger your reverse shell.<br />   In my case I visited - <code>http://10.10.10.140/install.php</code><br /></div>
</body>
</html>
