<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>ImGui</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>
<body>
<div class='page'><strong><h1># ImGui</h1></strong><br />Official repo<br /><a href="https://github.com/ocornut/imgui">https://github.com/ocornut/imgui</a><br /><br />ImGui is an immediate mode graphics library written in C++.<br />ImGui needs a graphics device to draw with - directx9, directx11, openGL, etc.<br />All the backend devices &amp; examples can be found here: <a href="https://github.com/ocornut/imgui/tree/master/backends">https://github.com/ocornut/imgui/tree/master/backends</a><br /><br />If you&#39;re external, you&#39;ll need to a create a transparent window for ImGui to draw in.<br />If you&#39;re internal, you&#39;ll need to connect ImGui to the graphics device used in the game.<br /><br /><strong>Links</strong><br />• <a href="https://guidedhacking.com/threads/guide-to-imgui-hooks-for-game-hack-menus.13993/">https://guidedhacking.com/threads/guide-to-imgui-hooks-for-game-hack-menus.13993/</a><br /><br /><h2>## Drawing</h2><br /><strong>Example box/text drawing:</strong><br />• <a href="https://www.unknowncheats.me/forum/d3d-tutorials-and-source/198625-rendering-imgui.html">https://www.unknowncheats.me/forum/d3d-tutorials-and-source/198625-rendering-imgui.html</a><br />• <a href="https://github.com/RampageMod/UE4-c-/blob/243b041e14bf72c0ef2827408861ff8c8a8e8027/clientmode/Valorant/overlay.h">https://github.com/RampageMod/UE4-c-/blob/243b041e14bf72c0ef2827408861ff8c8a8e8027/clientmode/Valorant/overlay.h</a><br /><br /><h2>## Tips</h2><br /><h3>### Font</h3><br />ProggyClean.ttf is ImGui&#39;s default font.<br />Add font:<br /><code>ImFont* DefaultFont = io.Fonts-&gt;AddFontFromFileTTF(&quot;C:\\Windows\\Fonts\\segoeui.ttf&quot;, 20.0f, NULL, io.Fonts-&gt;GetGlyphRangesCyrillic());</code><br /><br /><h3>### Framerate</h3><br /><code>ImGui::GetIO().Framerate</code><br /><code>PrintText(0, 0, &amp;imgui_green, &quot;%.1f fps (overlay)&quot;, ImGui::GetIO().Framerate);</code><br /><br /><h2>## External</h2><br />Create a window and a directx device for ImGui to draw with.<br /><br /><h3>### DirectX9</h3><br />• <a href="https://github.com/ocornut/imgui/blob/master/examples/example_win32_directx9/main.cpp">https://github.com/ocornut/imgui/blob/master/examples/example_win32_directx9/main.cpp</a><br />• <a href="https://github.com/KleskBY/DirectX9-ImGui-Overlay/blob/master/example_win32_directx9/main.cpp">https://github.com/KleskBY/DirectX9-ImGui-Overlay/blob/master/example_win32_directx9/main.cpp</a><br /><br /><h2>## Internal</h2><br />There isn&#39;t much to do when inserting ImGui internally.<br /><br /><h3>### Directx9</h3><br />• <a href="https://github.com/rdbo/DX9-BaseHook">https://github.com/rdbo/DX9-BaseHook</a><br /><br />Grab the game&#39;s window<br /><div class="codebox"><div class="codebox">HWND&nbsp;g_gameWindow&nbsp;=&nbsp;NULL;<br />g_gameWindow&nbsp;=&nbsp;FindWindowA(NULL,&nbsp;TARGET_WINDOW_NAME);</div></div><br /><br />Hook the game&#39;s window handler - WndProc - to your own WndProc function.<br />You use this to capture keypresses and then pass the window input to ImGui.<br /><div class="codebox"><div class="codebox">bool&nbsp;g_showMenu&nbsp;=&nbsp;true;<br />bool&nbsp;g_unload&nbsp;=&nbsp;false;<br /><br />//&nbsp;Forward&nbsp;declare&nbsp;message&nbsp;handler&nbsp;from&nbsp;imgui_impl_win32.cpp<br />extern&nbsp;IMGUI_IMPL_API&nbsp;LRESULT&nbsp;ImGui_ImplWin32_WndProcHandler(HWND&nbsp;hWnd,&nbsp;UINT&nbsp;msg,&nbsp;WPARAM&nbsp;wParam,&nbsp;LPARAM&nbsp;lParam);<br /><br />/*<br />My&nbsp;custom&nbsp;WindowProc.<br />Capture&nbsp;input&nbsp;myself,&nbsp;send&nbsp;input&nbsp;to&nbsp;ImGui,&nbsp;then&nbsp;return&nbsp;to&nbsp;original&nbsp;WindowProc.<br />*/<br />LRESULT&nbsp;WINAPI&nbsp;hooked_WndProc(HWND&nbsp;hWnd,&nbsp;UINT&nbsp;msg,&nbsp;WPARAM&nbsp;wParam,&nbsp;LPARAM&nbsp;lParam)<br />{<br />	if&nbsp;(msg&nbsp;==&nbsp;WM_KEYDOWN)<br />	{<br />		switch&nbsp;(wParam)<br />		{<br />		case&nbsp;VK_INSERT:<br />			g_showMenu&nbsp;=&nbsp;!g_showMenu;<br />			break;<br />		case&nbsp;VK_END:<br />			g_unload&nbsp;=&nbsp;true;<br />			break;<br />		}<br />	}<br /><br />	ImGui_ImplWin32_WndProcHandler(hWnd,&nbsp;msg,&nbsp;wParam,&nbsp;lParam);<br />	return&nbsp;CallWindowProc((WNDPROC)orig_WndProc,&nbsp;hWnd,&nbsp;msg,&nbsp;wParam,&nbsp;lParam);<br />}<br /><br />HWND&nbsp;orig_WndProc&nbsp;=&nbsp;(HWND)SetWindowLongPtrA(g_gameWindow,&nbsp;WNDPROC_INDEX_32,&nbsp;(LONG_PTR)hooked_WndProc);</div></div><br /><br />On the first frame you render, initialise ImGui.<br />Before rendering, create a new frame with <code>ImGui_..._NewFrame</code><br />And then render with <code>ImGui::EndFrame</code> and <code>ImGui::Render</code><br /><div class="codebox"><div class="codebox">HRESULT&nbsp;WINAPI&nbsp;hooked_EndScene(LPDIRECT3DDEVICE9&nbsp;orig_d3dDevice)<br /><span style="color:#000000;font-weight:400">{</span><br />	//&nbsp;Save&nbsp;the&nbsp;the&nbsp;game&#39;s&nbsp;direct3d&nbsp;device&nbsp;if&nbsp;we&nbsp;don&#39;t&nbsp;have&nbsp;it&nbsp;already<br />	//&nbsp;Used&nbsp;to&nbsp;draw&nbsp;stuff<br />	if&nbsp;(my_d3dDevice&nbsp;==&nbsp;NULL)<br />	{<br />		my_d3dDevice&nbsp;=&nbsp;orig_d3dDevice;<br />		printf(&quot;[*]&nbsp;Direct3d&nbsp;device&nbsp;@&nbsp;0x%p&nbsp;\n&quot;,&nbsp;my_d3dDevice);<br /><br />		//&nbsp;Initialise&nbsp;ImGui<br />		IMGUI_CHECKVERSION();<br />		ImGui::CreateContext();<br />		ImGuiIO&amp;&nbsp;io&nbsp;=&nbsp;ImGui::GetIO();&nbsp;(void)io;<br />		ImGui::StyleColorsDark();<br />		//io.ConfigFlags&nbsp;=&nbsp;ImGuiConfigFlags_NoMouseCursorChange;<br />		ImGui_ImplWin32_Init(g_gameWindow);<br />		ImGui_ImplDX9_Init(my_d3dDevice);<br />		printf(&quot;[+]&nbsp;Initialised&nbsp;ImGui&nbsp;\n&quot;);<br />	}<br /><br />	//&nbsp;Start&nbsp;ImGui&nbsp;rendering<br />	ImGui_ImplDX9_NewFrame();<br />	ImGui_ImplWin32_NewFrame();<br />	ImGui::NewFrame();<br /><br />	//&nbsp;Draw&nbsp;ImGui&nbsp;graphics<br />	if&nbsp;(g_showMenu&nbsp;==&nbsp;true)<br />		DrawImGuiMenu();<br /><br />	//&nbsp;End&nbsp;ImGUi&nbsp;rendering<br />	ImGui::EndFrame();<br />	ImGui::Render();<br />	ImGui_ImplDX9_RenderDrawData(ImGui::GetDrawData());<br /><br />	return&nbsp;orig_EndScene(my_d3dDevice);<br /><span style="color:#000000;font-weight:400">}</span></div></div><br /><br />That&#39;s it for directx9.<br /><br />If you want to handle directx9 device resets properly with ImGui, you&#39;ll have to hook<br />DirectX9-&gt;Reset and insert your ImGui reset there. <br />There&#39;s an example here for Nuklear:<br /><a href="https://github.com/Juksern/csgo-nuklear/blob/01d1d7684eefacdd182ae107e97ad7e7427e7aba/reset.cpp">https://github.com/Juksern/csgo-nuklear/blob/01d1d7684eefacdd182ae107e97ad7e7427e7aba/reset.cpp</a><br /><br /><h3>### DirectX11</h3><br />• <a href="https://www.unknowncheats.me/forum/grand-theft-auto-v/348332-universal-imgui-d3d11-hook.html">https://www.unknowncheats.me/forum/grand-theft-auto-v/348332-universal-imgui-d3d11-hook.html</a><br />• <a href="https://github.com/rdbo/DX11-BaseHook/blob/main/src/hooks/Present.cpp">https://github.com/rdbo/DX11-BaseHook/blob/main/src/hooks/Present.cpp</a><br /><br />If you don&#39;t have a cheat menu, you don&#39;t need to hook the game&#39;s WndProc.<br />If you do:<br />• Grab the game&#39;s window (FindWindow)<br />• Hook game&#39;s WndProc with SetWindowLongPtrA<br /><br />On the first run of Present()<br />• Grab the swap chain.<br />• Grab the dx11 device.<br />• Grab the device context<br />• Create a render target.<br />• Initialise ImGui.<br /><br />DONE! Render some frames.<br />   <br /><h3>### DirectX12</h3><br />• <a href="https://www.unknowncheats.me/forum/direct3d/371341-universal-dear-imgui-hook-directx12-implemented.html">https://www.unknowncheats.me/forum/direct3d/371341-universal-dear-imgui-hook-directx12-implemented.html</a></div>
</body>
</html>
