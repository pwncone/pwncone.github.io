<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Manuall Mapped Driver Examples</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>
<body>
<div class='page'><h1># Manually Mapped Driver Examples</h1><br /><br /><h2>## 1</h2><br />In Linker &gt; Advanced set the Entry Point to <code>DriverEntry</code><br /><a href=""><img src="images/1798-1.png" alt="images/1798-1.png" /></a><br /><br />Source:<br />â€¢ <a href="https://github.com/hfiref0x/TDL/blob/master/Source/DummyDrv/dummy/main.c">https://github.com/hfiref0x/TDL/blob/master/Source/DummyDrv/dummy/main.c</a><br /><br />Can compile the driver as Debug or Release<br /><div class="codebox"><div class="codebox">#include&nbsp;&lt;ntddk.h&gt;<br /><br />DRIVER_INITIALIZE&nbsp;DriverEntry;<br />#pragma&nbsp;alloc_text&nbsp;(INIT,&nbsp;DriverEntry)<br /><br />//&nbsp;Dbg&nbsp;will&nbsp;only&nbsp;run&nbsp;if&nbsp;compiled&nbsp;in&nbsp;Debug&nbsp;mode<br />#if&nbsp;DBG<br />#define&nbsp;Dbg(...)&nbsp;DbgPrint(&quot;[mmd1]&nbsp;&quot;&nbsp;__VA_ARGS__&nbsp;)<br />#else<br />#define&nbsp;Dbg(...)<br />#endif<br /><br />NTSTATUS&nbsp;DriverEntry(PDRIVER_OBJECT&nbsp;DriverObject,&nbsp;PUNICODE_STRING&nbsp;RegistryPath)<br /><span style="color:#000000;font-weight:400">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;UNREFERENCED_PARAMETER(DriverObject);&nbsp;&nbsp;&nbsp;//&nbsp;No&nbsp;DriverObject&nbsp;because&nbsp;manual&nbsp;map<br />&nbsp;&nbsp;&nbsp;&nbsp;UNREFERENCED_PARAMETER(RegistryPath);<br />&nbsp;&nbsp;&nbsp;&nbsp;NTSTATUS&nbsp;status&nbsp;=&nbsp;0;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;Dbg(&quot;System&nbsp;range&nbsp;start&nbsp;@&nbsp;0x%p&nbsp;\n&quot;,&nbsp;MmSystemRangeStart);<br />&nbsp;&nbsp;&nbsp;&nbsp;Dbg(&quot;Driver&nbsp;mapped&nbsp;@&nbsp;0x%p&nbsp;\n&quot;,&nbsp;DriverEntry);<br />&nbsp;&nbsp;&nbsp;&nbsp;Dbg(&quot;Process&nbsp;ID:&nbsp;%lld&nbsp;\n&quot;,&nbsp;(DWORD64)PsGetCurrentProcessId());<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;status;<br /><span style="color:#000000;font-weight:400">}</span></div></div><br /><br />Load with kdmapper<br /><a href=""><img src="images/1798-2.png" alt="images/1798-2.png" /></a></div>
</body>
</html>
